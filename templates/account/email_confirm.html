{% extends "base.html" %}
{% load static %}
{% load account %}

{% block title %}Confirm Email Address - EYTGaming{% endblock %}

{% block body %}
<div class="relative flex min-h-screen w-full flex-col items-center justify-center bg-background-dark p-4">
    <!-- Background Image with Overlay -->
    <div class="absolute inset-0 z-0 h-full w-full bg-cover bg-center bg-no-repeat" style='background-image: url("https://images.unsplash.com/photo-1542751371-adc38448a05e?w=1920"); opacity: 0.1;'></div>
    <div class="absolute inset-0 z-10 bg-gradient-to-t from-background-dark via-background-dark/80 to-transparent"></div>
    
    <!-- Header -->
    <header class="fixed top-0 left-0 right-0 z-30 bg-background-dark/50 backdrop-blur-sm border-b border-white/10">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center gap-3">
                    <img src="{% static 'images/EYTLOGO.jpg' %}" alt="EYTGaming Logo" class="h-8 w-8 rounded-lg object-cover"/>
                    <h2 class="text-xl font-bold leading-tight tracking-tight text-white">EYTGaming</h2>
                </div>
                <div class="flex items-center gap-6">
                    <a class="text-sm font-medium text-gray-300 hover:text-primary transition-colors" href="{% url 'home' %}">Home</a>
                    <a class="text-sm font-medium text-gray-300 hover:text-primary transition-colors" href="{% url 'account_login' %}">Login</a>
                </div>
            </div>
        </div>
    </header>
    
    <!-- Main Content -->
    <main class="relative z-20 flex w-full flex-1 items-center justify-center px-4 py-20">
        <div class="w-full max-w-md rounded-xl bg-neutral-900/80 p-8 text-center shadow-2xl shadow-primary/10 ring-1 ring-white/10 backdrop-blur-lg sm:p-10">
            
            {% if confirmation %}
                <!-- Email Confirmation Required -->
                <div class="mx-auto flex h-20 w-20 items-center justify-center rounded-full bg-primary/20 text-primary">
                    <span class="material-symbols-outlined !text-5xl">mark_email_unread</span>
                </div>
                
                <h1 class="mt-6 text-3xl font-bold tracking-tight text-white sm:text-4xl">Confirm Your Email</h1>
                
                <p class="mt-4 text-base leading-relaxed text-gray-300">
                    Please confirm that <span class="font-semibold text-primary">{{ confirmation.email_address.email }}</span> is your email address.
                </p>
                
                <div class="mt-8 space-y-4 text-left text-sm text-gray-400">
                    <div class="flex items-start gap-4">
                        <div class="flex h-6 w-6 flex-shrink-0 items-center justify-center rounded-full bg-primary/10 text-primary">
                            <span class="font-bold">1</span>
                        </div>
                        <p>Click the button below to verify your email address and activate your account.</p>
                    </div>
                    <div class="flex items-start gap-4">
                        <div class="flex h-6 w-6 flex-shrink-0 items-center justify-center rounded-full bg-primary/10 text-primary">
                            <span class="font-bold">2</span>
                        </div>
                        <p>Once confirmed, you'll have full access to all EYTGaming features including tournaments, coaching, and more!</p>
                    </div>
                </div>
                
                <!-- Django Messages -->
                {% if messages %}
                    <div class="mt-6 space-y-2">
                        {% for message in messages %}
                            <div class="flex items-center gap-3 px-4 py-3 rounded-lg {% if message.tags == 'error' %}bg-red-900/20 border border-red-800 text-red-200{% elif message.tags == 'success' %}bg-green-900/20 border border-green-800 text-green-200{% else %}bg-blue-900/20 border border-blue-800 text-blue-200{% endif %}">
                                <span class="material-symbols-outlined text-sm">
                                    {% if message.tags == 'error' %}error{% elif message.tags == 'success' %}check_circle{% else %}info{% endif %}
                                </span>
                                <p class="text-sm">{{ message }}</p>
                            </div>
                        {% endfor %}
                    </div>
                {% endif %}
                
                <!-- Confirmation Form -->
                <form method="post" action="{% url 'account_confirm_email' confirmation.key %}" class="mt-8">
                    {% csrf_token %}
                    <button type="submit" class="flex h-14 w-full cursor-pointer items-center justify-center overflow-hidden rounded-lg bg-primary px-6 text-lg font-bold tracking-wide text-white shadow-lg shadow-primary/30 transition-all duration-300 ease-in-out hover:bg-primary/90 hover:shadow-primary/40 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 focus:ring-offset-background-dark">
                        <span class="truncate">Confirm Email Address</span>
                    </button>
                </form>
                
            {% else %}
                <!-- Invalid or Expired Link -->
                <div class="mx-auto flex h-20 w-20 items-center justify-center rounded-full bg-red-500/20 text-red-500">
                    <span class="material-symbols-outlined !text-5xl">error</span>
                </div>
                
                <h1 class="mt-6 text-3xl font-bold tracking-tight text-white sm:text-4xl">Invalid Link</h1>
                
                <p class="mt-4 text-base leading-relaxed text-gray-300">
                    This email confirmation link is invalid or has expired.
                </p>
                
                <div class="mt-8 space-y-4">
                    <a href="{% url 'account_email' %}" class="flex h-14 w-full cursor-pointer items-center justify-center overflow-hidden rounded-lg bg-primary px-6 text-lg font-bold tracking-wide text-white shadow-lg shadow-primary/30 transition-all duration-300 ease-in-out hover:bg-primary/90 hover:shadow-primary/40 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 focus:ring-offset-background-dark">
                        <span class="truncate">Request New Confirmation Email</span>
                    </a>
                    
                    <a href="{% url 'account_login' %}" class="block text-sm text-gray-400 hover:text-primary transition-colors">
                        Back to Login
                    </a>
                </div>
            {% endif %}
            
            <!-- Help Links -->
            <div class="mt-8 pt-6 border-t border-white/10">
                <p class="text-sm text-gray-400">
                    Need help? <a href="#" class="text-primary hover:text-primary/80 underline">Contact Support</a>
                </p>
            </div>
        </div>
    </main>
</div>
{% endblock %}
