{% extends 'base.html' %}
{% load static %}

{% block title %}Register for {{ tournament.name }} - EYTGaming{% endblock %}

{% block body %}
<div class="min-h-screen bg-background-dark">
    <main class="px-4 sm:px-8 md:px-16 lg:px-24 xl:px-40 py-10">
        <div class="max-w-2xl mx-auto">
            <!-- Breadcrumbs -->
            <nav class="mb-6 flex items-center text-sm">
                <a href="{% url 'home' %}" class="text-gray-400 hover:text-white transition-colors">Home</a>
                <span class="mx-2 text-gray-600">/</span>
                <a href="{% url 'tournaments:list' %}" class="text-gray-400 hover:text-white transition-colors">Tournaments</a>
                <span class="mx-2 text-gray-600">/</span>
                <a href="{% url 'tournaments:detail' tournament.slug %}" class="text-gray-400 hover:text-white transition-colors">{{ tournament.name }}</a>
                <span class="mx-2 text-gray-600">/</span>
                <span class="text-primary font-medium">Confirm Registration</span>
            </nav>

            <!-- Registration Card -->
            <div class="bg-surface-dark p-8 rounded-xl border border-white/10 shadow-2xl">
                <div class="text-center mb-10">
                    <div class="w-16 h-16 bg-primary/20 rounded-full flex items-center justify-center mx-auto mb-4">
                        <span class="material-symbols-outlined text-primary text-3xl">how_to_reg</span>
                    </div>
                    <h1 class="text-3xl font-bold text-white mb-2">Confirm Registration</h1>
                    <p class="text-gray-400">Review your details for {{ tournament.name }}</p>
                </div>

                <!-- Tournament Summary Card -->
                <div class="bg-background-dark/50 border border-white/5 p-6 rounded-lg mb-8">
                    <h2 class="text-lg font-bold text-white mb-4 flex items-center gap-2">
                        <span class="material-symbols-outlined text-primary text-sm">emoji_events</span>
                        Tournament Summary
                    </h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 text-sm">
                        <div class="space-y-1">
                            <p class="text-gray-500 uppercase text-xs tracking-wider">Start Date</p>
                            <p class="text-white font-medium">{{ tournament.start_datetime|date:"M d, Y g:i A" }}</p>
                        </div>
                        <div class="space-y-1">
                            <p class="text-gray-500 uppercase text-xs tracking-wider">Tournament Format</p>
                            <p class="text-white font-medium">{{ tournament.get_format_display }}</p>
                        </div>
                        <div class="space-y-1">
                            <p class="text-gray-500 uppercase text-xs tracking-wider">Entry Fee</p>
                            <p class="text-white font-medium">{% if tournament.registration_fee > 0 %}${{ tournament.registration_fee }}{% else %}<span class="text-green-500">Free</span>{% endif %}</p>
                        </div>
                        <div class="space-y-1">
                            <p class="text-gray-500 uppercase text-xs tracking-wider">Prize Pool</p>
                            <p class="text-primary font-bold text-base">{% if tournament.prize_pool %}${{ tournament.prize_pool }}{% else %}TBD{% endif %}</p>
                        </div>
                        {% if is_team_based %}
                        <div class="md:col-span-2 p-3 bg-primary/5 rounded border border-primary/10">
                            <p class="text-gray-500 uppercase text-xs tracking-wider mb-1">Registering Team</p>
                            <div class="flex items-center gap-2">
                                <span class="material-symbols-outlined text-primary text-sm">groups</span>
                                <span class="text-white font-bold">{{ user_team.name }} <span class="text-gray-500 font-normal">[{{ user_team.tag }}]</span></span>
                            </div>
                        </div>
                        {% endif %}
                    </div>
                </div>

                <!-- Registration Fee Notice -->
                {% if registration_fee > 0 %}
                <div class="bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-5 mb-8 flex items-start gap-4">
                    <div class="w-10 h-10 bg-yellow-500/20 rounded-full flex items-center justify-center shrink-0">
                        <span class="material-symbols-outlined text-yellow-500">payments</span>
                    </div>
                    <div>
                        <h4 class="text-yellow-500 font-bold text-sm mb-1">Payment Required</h4>
                        <p class="text-gray-300 text-sm">
                            Upon confirmation, you will be redirected to our secure payment gateway to complete the payment of <span class="text-white font-bold">${{ registration_fee }}</span>.
                        </p>
                    </div>
                </div>
                {% endif %}

                <!-- Terms and Conditions -->
                <div class="bg-background-dark/30 p-5 rounded-lg mb-8 border border-white/5">
                    <h3 class="text-white font-bold mb-3 text-sm flex items-center gap-2">
                        <span class="material-symbols-outlined text-gray-500 text-sm">gavel</span>
                        Terms and Conditions
                    </h3>
                    <ul class="text-gray-400 text-sm space-y-2">
                        <li class="flex gap-2">
                            <span class="text-primary">•</span>
                            <span>Agreement to follow all tournament rules and professional conduct standards.</span>
                        </li>
                        <li class="flex gap-2">
                            <span class="text-primary">•</span>
                            <span>Mandatory check-in during the designated window is required for participation.</span>
                        </li>
                        {% if registration_fee > 0 %}
                        <li class="flex gap-2">
                            <span class="text-primary">•</span>
                            <span>Registration fees are non-refundable unless the tournament is cancelled.</span>
                        </li>
                        {% endif %}
                        <li class="flex gap-2">
                            <span class="text-primary">•</span>
                            <span>EYTGaming reserves the right to disqualify players for unsportsmanlike behavior.</span>
                        </li>
                    </ul>
                </div>

                <!-- Action Buttons -->
                <div class="flex flex-col sm:flex-row gap-4">
                    <a href="{% url 'tournaments:detail' tournament.slug %}" 
                       class="flex-1 px-6 py-4 bg-surface-dark border border-white/10 hover:bg-neutral-800 text-gray-300 hover:text-white font-medium rounded-xl text-center transition-all">
                        Cancel
                    </a>
                    <form method="post" class="flex-1">
                        {% csrf_token %}
                        <button type="submit" 
                                class="w-full px-6 py-4 bg-primary hover:bg-primary-light text-white font-bold rounded-xl shadow-glow-red hover:shadow-glow-red-lg transform hover:-translate-y-0.5 transition-all flex items-center justify-center gap-2">
                            <span class="material-symbols-outlined">done_all</span>
                            {% if registration_fee > 0 %}
                                Confirm & Pay ${{ registration_fee }}
                            {% else %}
                                Confirm Registration
                            {% endif %}
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </main>
</div>
{% endblock %}