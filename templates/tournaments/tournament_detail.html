{% extends "base.html" %}
{% load static %}
{% load custom_filters %}
{% load humanize %}

{% block title %}{{ tournament_display.name|safe_default:"Tournament" }} - EYTGaming{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/brand-consistency-fix.css' %}">
<link rel="stylesheet" href="{% static 'css/tournament-detail.css' %}">
<link rel="stylesheet" href="{% static 'css/mobile-responsive.css' %}">
<link rel="stylesheet" href="{% static 'css/breadcrumb-mobile-fix.css' %}">
<!-- Dashboard Gaming CSS for consistent styling -->
<link rel="stylesheet" href="{% static 'css/dashboard-gaming.css' %}">
<link rel="stylesheet" href="{% static 'css/dashboard-mobile.css' %}">

<!-- Gaming Styling Overrides -->
<style>
/* Gaming Header Styles */
.tournament-gaming-header {
    font-family: 'Barlow Condensed', sans-serif;
    font-weight: 900;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: #DC2626;
    text-shadow: 0 0 20px rgba(220, 38, 38, 0.5);
}

/* Gaming Card Styles */
.tournament-gaming-card {
    background: linear-gradient(135deg, rgba(10, 10, 10, 0.95) 0%, rgba(31, 31, 31, 0.95) 100%);
    border: 2px solid rgba(220, 38, 38, 0.3);
    border-radius: 0.5rem;
    position: relative;
    overflow: hidden;
    transition: all 0.3s ease;
}

.tournament-gaming-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(220, 38, 38, 0.1), transparent);
    transition: left 0.5s ease;
}

.tournament-gaming-card:hover::before {
    left: 100%;
}

.tournament-gaming-card:hover {
    border-color: rgba(220, 38, 38, 0.6);
    box-shadow: 0 0 30px rgba(220, 38, 38, 0.2);
    transform: translateY(-2px);
}

/* Gaming Button Styles */
.btn-gaming-tournament {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    padding: 0.875rem 1.5rem;
    background: linear-gradient(135deg, #DC2626 0%, #B91C1C 100%);
    color: white;
    font-family: 'Barlow Condensed', sans-serif;
    font-weight: 700;
    font-size: 0.875rem;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    border: none;
    border-radius: 0.375rem;
    position: relative;
    overflow: hidden;
    transition: all 0.3s ease;
    cursor: pointer;
    text-decoration: none;
}

.btn-gaming-tournament::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
    transition: left 0.5s ease;
}

.btn-gaming-tournament:hover::before {
    left: 100%;
}

.btn-gaming-tournament:hover {
    transform: translateY(-2px);
    box-shadow: 0 10px 25px rgba(220, 38, 38, 0.4);
}

/* Gaming Stats */
.tournament-gaming-stat {
    text-align: center;
    padding: 1rem;
    background: rgba(220, 38, 38, 0.05);
    border: 1px solid rgba(220, 38, 38, 0.2);
    border-radius: 0.5rem;
}

.tournament-gaming-stat-value {
    font-family: 'Space Grotesk', sans-serif;
    font-size: 1.5rem;
    font-weight: 700;
    color: #DC2626;
}

.tournament-gaming-stat-label {
    font-family: 'Inter', sans-serif;
    font-size: 0.625rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    color: #6B7280;
    margin-top: 0.25rem;
}

/* Ensure mobile navigation is clickable */
/* Fix breadcrumb clickability */
nav[aria-label="Breadcrumb"] {
    z-index: 50 !important;
    position: relative;
}

nav[aria-label="Breadcrumb"] a {
    pointer-events: auto !important;
    cursor: pointer !important;
    position: relative;
    z-index: 51 !important;
}

/* ==========================================
   GAMING STYLING - Tournament Detail
   ========================================== */

/* Gaming Hero Section */
.tournament-gaming-hero {
    position: relative;
    overflow: hidden;
}

.tournament-gaming-hero::before {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(135deg, rgba(220, 38, 38, 0.1) 0%, transparent 50%, rgba(6, 182, 212, 0.1) 100%);
    pointer-events: none;
    z-index: 1;
}

/* Gaming Title */
.tournament-gaming-title {
    font-family: 'Barlow Condensed', sans-serif;
    font-weight: 900;
    text-transform: uppercase;
    letter-spacing: 0.02em;
    background: linear-gradient(135deg, #FFFFFF 0%, #DC2626 50%, #FFFFFF 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    text-shadow: 0 0 30px rgba(220, 38, 38, 0.3);
}

/* Gaming Badges */
.gaming-status-badge {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.5rem 1rem;
    background: linear-gradient(135deg, rgba(220, 38, 38, 0.2) 0%, rgba(220, 38, 38, 0.1) 100%);
    border: 1px solid rgba(220, 38, 38, 0.5);
    border-radius: 0.5rem;
    font-family: 'Barlow Condensed', sans-serif;
    font-weight: 700;
    text-transform: uppercase;
    font-size: 0.875rem;
    color: #DC2626;
    box-shadow: 0 0 15px rgba(220, 38, 38, 0.2);
}

.gaming-status-badge.active {
    animation: pulse-glow 2s ease-in-out infinite;
}

@keyframes pulse-glow {
    0%, 100% { box-shadow: 0 0 15px rgba(220, 38, 38, 0.2); }
    50% { box-shadow: 0 0 25px rgba(220, 38, 38, 0.5); }
}

/* Gaming Featured Badge */
.gaming-featured-badge {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.5rem 1rem;
    background: linear-gradient(135deg, rgba(6, 182, 212, 0.2) 0%, rgba(6, 182, 212, 0.1) 100%);
    border: 1px solid rgba(6, 182, 212, 0.5);
    border-radius: 0.5rem;
    font-family: 'Barlow Condensed', sans-serif;
    font-weight: 700;
    text-transform: uppercase;
    font-size: 0.875rem;
    color: #06B6D4;
    box-shadow: 0 0 15px rgba(6, 182, 212, 0.2);
}

/* Gaming Stats Cards */
.gaming-stat-card {
    background: linear-gradient(135deg, rgba(10, 10, 10, 0.95) 0%, rgba(31, 31, 31, 0.95) 100%);
    border: 2px solid rgba(220, 38, 38, 0.3);
    border-radius: 0.75rem;
    padding: 1.5rem;
    text-align: center;
    position: relative;
    overflow: hidden;
    transition: all 0.3s ease;
}

.gaming-stat-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(220, 38, 38, 0.1), transparent);
    transition: left 0.5s ease;
}

.gaming-stat-card:hover::before {
    left: 100%;
}

.gaming-stat-card:hover {
    border-color: rgba(220, 38, 38, 0.6);
    box-shadow: 0 0 30px rgba(220, 38, 38, 0.2);
    transform: translateY(-4px);
}

.gaming-stat-value {
    font-family: 'Space Grotesk', sans-serif;
    font-size: 2rem;
    font-weight: 700;
    color: #DC2626;
    text-shadow: 0 0 20px rgba(220, 38, 38, 0.3);
}

.gaming-stat-label {
    font-family: 'Inter', sans-serif;
    font-size: 0.625rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    color: #6B7280;
    margin-top: 0.5rem;
}

/* Gaming Progress Bar */
.gaming-progress-bar {
    height: 4px;
    background: rgba(220, 38, 38, 0.2);
    border-radius: 2px;
    overflow: hidden;
    margin-top: 0.75rem;
}

.gaming-progress-fill {
    height: 100%;
    background: linear-gradient(90deg, #DC2626 0%, #06B6D4 100%);
    border-radius: 2px;
    box-shadow: 0 0 10px rgba(220, 38, 38, 0.5);
    transition: width 0.5s ease;
}

/* Gaming Timeline */
.gaming-timeline {
    position: relative;
}

.gaming-timeline-line {
    height: 4px;
    background: linear-gradient(90deg, #DC2626 0%, #06B6D4 50%, #DC2626 100%);
    border-radius: 2px;
    box-shadow: 0 0 15px rgba(220, 38, 38, 0.3);
}

.gaming-phase-indicator {
    width: 3rem;
    height: 3rem;
    border-radius: 50%;
    background: linear-gradient(135deg, #DC2626 0%, #B91C1C 100%);
    border: 3px solid #0A0A0A;
    box-shadow: 0 0 20px rgba(220, 38, 38, 0.5);
    display: flex;
    align-items: center;
    justify-content: center;
}

.gaming-phase-indicator.completed {
    background: linear-gradient(135deg, #059669 0%, #047857 100%);
    box-shadow: 0 0 20px rgba(5, 150, 105, 0.5);
}

.gaming-phase-indicator.pending {
    background: linear-gradient(135deg, #374151 0%, #1F2937 100%);
    box-shadow: 0 0 10px rgba(55, 65, 81, 0.3);
}

/* Gaming Info Cards */
.gaming-info-card {
    background: linear-gradient(135deg, rgba(10, 10, 10, 0.95) 0%, rgba(31, 31, 31, 0.95) 100%);
    border: 2px solid rgba(220, 38, 38, 0.2);
    border-radius: 0.75rem;
    padding: 1.5rem;
    position: relative;
    overflow: hidden;
    transition: all 0.3s ease;
}

.gaming-info-card:hover {
    border-color: rgba(220, 38, 38, 0.4);
    box-shadow: 0 0 25px rgba(220, 38, 38, 0.15);
}

.gaming-info-card-title {
    font-family: 'Barlow Condensed', sans-serif;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: #DC2626;
    font-size: 1rem;
    margin-bottom: 1rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

/* Gaming Buttons */
.btn-gaming-tournament {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    padding: 1rem 2rem;
    background: linear-gradient(135deg, #DC2626 0%, #B91C1C 100%);
    color: white;
    font-family: 'Barlow Condensed', sans-serif;
    font-weight: 700;
    font-size: 1rem;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    border: none;
    border-radius: 0.5rem;
    position: relative;
    overflow: hidden;
    transition: all 0.3s ease;
    cursor: pointer;
    text-decoration: none;
    box-shadow: 0 4px 15px rgba(220, 38, 38, 0.4);
}

.btn-gaming-tournament::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
    transition: left 0.5s ease;
}

.btn-gaming-tournament:hover::before {
    left: 100%;
}

.btn-gaming-tournament:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(220, 38, 38, 0.5);
}

.btn-gaming-tournament-outline {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    padding: 1rem 2rem;
    background: transparent;
    color: #DC2626;
    font-family: 'Barlow Condensed', sans-serif;
    font-weight: 700;
    font-size: 1rem;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    border: 2px solid #DC2626;
    border-radius: 0.5rem;
    position: relative;
    overflow: hidden;
    transition: all 0.3s ease;
    cursor: pointer;
    text-decoration: none;
}

.btn-gaming-tournament-outline:hover {
    background: rgba(220, 38, 38, 0.1);
    box-shadow: 0 0 20px rgba(220, 38, 38, 0.3);
}

/* Gaming Meta Items */
.gaming-meta-item {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 0.75rem 1rem;
    background: rgba(220, 38, 38, 0.05);
    border: 1px solid rgba(220, 38, 38, 0.2);
    border-radius: 0.5rem;
    transition: all 0.3s ease;
}

.gaming-meta-item:hover {
    background: rgba(220, 38, 38, 0.1);
    border-color: rgba(220, 38, 38, 0.4);
}

.gaming-meta-icon {
    color: #DC2626;
    font-size: 1.25rem;
}

.gaming-meta-label {
    font-family: 'Inter', sans-serif;
    font-size: 0.625rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    color: #6B7280;
}

.gaming-meta-value {
    font-family: 'Space Grotesk', sans-serif;
    font-weight: 600;
    color: #FFFFFF;
}

/* Gaming Section Headers */
.gaming-section-title {
    font-family: 'Barlow Condensed', sans-serif;
    font-weight: 900;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: #DC2626;
    font-size: 1.5rem;
    margin-bottom: 1.5rem;
    display: flex;
    align-items: center;
    gap: 0.75rem;
}

.gaming-section-title::after {
    content: '';
    flex: 1;
    height: 2px;
    background: linear-gradient(90deg, #DC2626 0%, transparent 100%);
}

/* Gaming Prize Display */
.gaming-prize-display {
    background: linear-gradient(135deg, rgba(220, 38, 38, 0.1) 0%, rgba(6, 182, 212, 0.1) 100%);
    border: 2px solid rgba(220, 38, 38, 0.3);
    border-radius: 1rem;
    padding: 2rem;
    text-align: center;
    position: relative;
    overflow: hidden;
}

.gaming-prize-display::before {
    content: '';
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: radial-gradient(circle, rgba(220, 38, 38, 0.1) 0%, transparent 70%);
    animation: rotate 20s linear infinite;
}

@keyframes rotate {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}

.gaming-prize-amount {
    font-family: 'Space Grotesk', sans-serif;
    font-size: 3rem;
    font-weight: 700;
    background: linear-gradient(135deg, #DC2626 0%, #06B6D4 50%, #DC2626 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    text-shadow: 0 0 30px rgba(220, 38, 38, 0.3);
    position: relative;
    z-index: 1;
}

/* Gaming Participant Cards */
.gaming-participant-card {
    background: linear-gradient(135deg, rgba(10, 10, 10, 0.95) 0%, rgba(31, 31, 31, 0.95) 100%);
    border: 2px solid rgba(220, 38, 38, 0.2);
    border-radius: 0.75rem;
    padding: 1rem;
    display: flex;
    align-items: center;
    gap: 1rem;
    transition: all 0.3s ease;
}

.gaming-participant-card:hover {
    border-color: rgba(220, 38, 38, 0.5);
    box-shadow: 0 0 20px rgba(220, 38, 38, 0.15);
    transform: translateX(4px);
}

.gaming-participant-rank {
    width: 2.5rem;
    height: 2.5rem;
    border-radius: 50%;
    background: linear-gradient(135deg, #DC2626 0%, #B91C1C 100%);
    display: flex;
    align-items: center;
    justify-content: center;
    font-family: 'Barlow Condensed', sans-serif;
    font-weight: 700;
    color: white;
    box-shadow: 0 0 15px rgba(220, 38, 38, 0.4);
}

/* Gaming Tab Navigation */
.gaming-tab-nav {
    display: flex;
    gap: 0.5rem;
    border-bottom: 2px solid rgba(220, 38, 38, 0.2);
    margin-bottom: 2rem;
}

.gaming-tab-item {
    padding: 1rem 1.5rem;
    font-family: 'Barlow Condensed', sans-serif;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: #6B7280;
    border-bottom: 3px solid transparent;
    transition: all 0.3s ease;
    cursor: pointer;
}

.gaming-tab-item:hover {
    color: #DC2626;
}

.gaming-tab-item.active {
    color: #DC2626;
    border-bottom-color: #DC2626;
    text-shadow: 0 0 10px rgba(220, 38, 38, 0.3);
}

/* Neon Glow Effects */
.neon-red-glow-sm {
    box-shadow: 0 0 10px rgba(220, 38, 38, 0.3);
}

.neon-red-glow-md {
    box-shadow: 0 0 20px rgba(220, 38, 38, 0.4);
}

.neon-cyan-glow {
    box-shadow: 0 0 20px rgba(6, 182, 212, 0.4);
}

/* Gaming Stat Items */
.gaming-stat-item {
    display: flex;
    align-items: center;
    gap: 1rem;
    padding: 1rem;
    background: linear-gradient(135deg, rgba(10, 10, 10, 0.95) 0%, rgba(31, 31, 31, 0.95) 100%);
    border: 2px solid rgba(220, 38, 38, 0.2);
    border-radius: 0.75rem;
    transition: all 0.3s ease;
}

.gaming-stat-item:hover {
    border-color: rgba(220, 38, 38, 0.4);
    box-shadow: 0 0 20px rgba(220, 38, 38, 0.15);
    transform: translateY(-2px);
}

.gaming-stat-icon {
    color: #DC2626;
    font-size: 1.5rem;
}

.gaming-stat-number {
    font-family: 'Space Grotesk', sans-serif;
    font-size: 1.5rem;
    font-weight: 700;
    color: #DC2626;
    text-shadow: 0 0 15px rgba(220, 38, 38, 0.3);
}

.gaming-stat-description {
    font-family: 'Inter', sans-serif;
    font-size: 0.75rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: #6B7280;
}

/* Gaming Match Items */
.gaming-match-item {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 1rem;
    background: linear-gradient(135deg, rgba(10, 10, 10, 0.95) 0%, rgba(31, 31, 31, 0.95) 100%);
    border: 2px solid rgba(220, 38, 38, 0.2);
    border-radius: 0.75rem;
    transition: all 0.3s ease;
}

.gaming-match-item:hover {
    border-color: rgba(220, 38, 38, 0.4);
    box-shadow: 0 0 20px rgba(220, 38, 38, 0.15);
    transform: translateX(4px);
}

.gaming-participant-info {
    display: flex;
    align-items: center;
    gap: 1rem;
}

.gaming-participant-name {
    font-family: 'Barlow Condensed', sans-serif;
    font-weight: 600;
    color: #FFFFFF;
}

.gaming-match-result {
    font-family: 'Space Grotesk', sans-serif;
    font-weight: 700;
    font-size: 1.125rem;
}

.gaming-result-win {
    color: #10B981;
}

.gaming-result-loss {
    color: #EF4444;
}

/* Gaming Filter Buttons */
.gaming-filter-btn {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.5rem 1rem;
    background: rgba(220, 38, 38, 0.1);
    color: #DC2626;
    font-family: 'Barlow Condensed', sans-serif;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    border: 2px solid rgba(220, 38, 38, 0.3);
    border-radius: 0.5rem;
    transition: all 0.3s ease;
    cursor: pointer;
}

.gaming-filter-btn:hover {
    background: rgba(220, 38, 38, 0.2);
    box-shadow: 0 0 15px rgba(220, 38, 38, 0.3);
}

.gaming-filter-btn.active {
    background: linear-gradient(135deg, #DC2626 0%, #B91C1C 100%);
    color: white;
    border-color: #DC2626;
    box-shadow: 0 0 20px rgba(220, 38, 38, 0.4);
}

/* Responsive Adjustments */
@media (max-width: 768px) {
    .gaming-stat-value {
        font-size: 1.5rem;
    }
    
    .gaming-prize-amount {
        font-size: 2rem;
    }
    
    .gaming-section-title {
        font-size: 1.25rem;
    }
    
    .gaming-stat-number {
        font-size: 1.25rem;
    }
}
</style>
<style>
/* Check-in Button Styling */
.check-in-actions {
    margin-top: 1rem;
}

.check-in-btn {
    background: linear-gradient(135deg, var(--eyt-primary) 0%, var(--eyt-primary-dark) 100%) !important;
    border: none !important;
    color: white !important;
    padding: 0.875rem 1.5rem !important;
    border-radius: 0.5rem !important;
    font-weight: 600 !important;
    font-size: 1rem !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    gap: 0.5rem !important;
    transition: all 0.3s ease !important;
    box-shadow: 0 4px 12px var(--eyt-primary-alpha-30) !important;
    text-decoration: none !important;
    width: 100% !important;
}

.check-in-btn:hover {
    background: linear-gradient(135deg, var(--eyt-primary-light) 0%, var(--eyt-primary) 100%) !important;
    transform: translateY(-2px) !important;
    box-shadow: 0 6px 20px var(--eyt-primary-alpha-40) !important;
    color: white !important;
}

.check-in-btn:active {
    transform: translateY(0) !important;
    box-shadow: 0 2px 8px var(--eyt-primary-alpha-30) !important;
}

.check-in-btn .material-symbols-outlined {
    font-size: 1.25rem !important;
}

/* Checked-in Status Styling */
.checked-in-status {
    background: linear-gradient(135deg, #059669 0%, #047857 100%);
    border: 1px solid #10b981;
    border-radius: 0.5rem;
    padding: 1rem;
    margin-top: 1rem;
    display: flex;
    align-items: center;
    gap: 0.75rem;
}

.checked-in-status .status-icon-container {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 2.5rem;
    height: 2.5rem;
    background: rgba(255, 255, 255, 0.2);
    border-radius: 50%;
}

.checked-in-status .status-icon {
    font-size: 1.5rem !important;
    color: white !important;
}

.checked-in-status .status-content {
    flex: 1;
}

.checked-in-status .status-title {
    font-weight: 600;
    font-size: 1.1rem;
    color: white;
    margin-bottom: 0.25rem;
}

.checked-in-status .status-subtitle {
    font-size: 0.875rem;
    color: rgba(255, 255, 255, 0.8);
    margin-bottom: 0.25rem;
}

.checked-in-status .check-in-time {
    font-size: 0.75rem;
    color: rgba(255, 255, 255, 0.7);
    font-weight: 500;
}
</style>
{% endblock %}

{% block extra_head %}
{% endblock %}

{% block extra_meta %}
<!-- Open Graph Meta Tags for Social Sharing -->
<meta property="og:title" content="{{ tournament_display.name|safe_default:'Tournament' }} - EYTGaming">
<meta property="og:description" content="{{ tournament.description|truncatewords:30|safe_default:'Join this exciting tournament on EYTGaming!' }}">
<meta property="og:type" content="website">
<meta property="og:url" content="{{ request.build_absolute_uri }}">
{% if template_flags.has_banner %}
<meta property="og:image" content="{{ request.build_absolute_uri }}{{ tournament.banner.url }}">
{% else %}
<meta property="og:image" content="{{ request.build_absolute_uri }}{% static 'images/EYTLOGO.jpg' %}">
{% endif %}
<meta property="og:site_name" content="EYTGaming">

<!-- Twitter Card Meta Tags -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="{{ tournament_display.name|safe_default:'Tournament' }} - EYTGaming">
<meta name="twitter:description" content="{{ tournament.description|truncatewords:30|safe_default:'Join this exciting tournament on EYTGaming!' }}">
{% if template_flags.has_banner %}
<meta name="twitter:image" content="{{ request.build_absolute_uri }}{{ tournament.banner.url }}">
{% else %}
<meta name="twitter:image" content="{{ request.build_absolute_uri }}{% static 'images/EYTLOGO.jpg' %}">
{% endif %}
{% endblock %}

{% block body %}
<div class="min-h-screen bg-background-dark">
    <!-- Gaming Breadcrumb Navigation -->
    <nav class="bg-[#0A0A0A]/90 backdrop-blur-sm border-b border-[#DC2626]/30 relative z-[50]" aria-label="Breadcrumb" style="pointer-events: auto;">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center space-x-2 py-3 text-sm">
                <a href="{% url 'tournaments:list' %}" 
                   class="text-gray-400 hover:text-[#DC2626] transition-colors flex items-center gap-1 min-h-[44px] min-w-[44px] px-2"
                   style="pointer-events: auto; cursor: pointer; position: relative; z-index: 51;">
                    <span class="material-symbols-outlined text-[#DC2626]" aria-hidden="true">emoji_events</span>
                    <span class="gaming-subheader">TOURNAMENTS</span>
                </a>
                <span class="material-symbols-outlined text-gray-600 text-sm" aria-hidden="true">chevron_right</span>
                <span class="text-white font-medium gaming-body truncate max-w-[200px] sm:max-w-[400px]">{{ tournament_display.name|safe_default:"Tournament Name" }}</span>
            </div>
        </div>
    </nav>

    <!-- Enhanced Gaming Hero Section -->
    <section class="hero-section tournament-gaming-hero relative overflow-hidden" 
             aria-labelledby="tournament-title"
             data-game-colors="{{ tournament.game.primary_color|default:'#b91c1c' }},{{ tournament.game.secondary_color|default:'#7f1d1d' }}"
             data-tournament-status="{{ tournament.status }}"
             data-is-featured="{{ tournament.is_featured|yesno:'true,false' }}">
        
        <!-- Dynamic Background with Tournament Banner or Game-themed Gradient -->
        <div class="hero-background absolute inset-0">
            {% if tournament.banner %}
                <img src="{{ tournament.banner.url }}" 
                     alt="{{ tournament.name }} banner" 
                     class="w-full h-full object-cover hero-banner-image"
                     loading="eager"
                     decoding="async"
                     sizes="(max-width: 768px) 100vw, (max-width: 1200px) 100vw, 100vw"
                     srcset="{% if tournament.banner_small %}{{ tournament.banner_small.url }} 768w,{% endif %}
                             {% if tournament.banner_medium %}{{ tournament.banner_medium.url }} 1200w,{% endif %}
                             {{ tournament.banner.url }} 1920w">
                <!-- Game Color Overlay for Banner Images -->
                <div class="hero-game-overlay absolute inset-0 opacity-30"
                     style="background: linear-gradient(135deg, {{ tournament.game.primary_color|default:'#b91c1c' }} 0%, {{ tournament.game.secondary_color|default:'#7f1d1d' }} 100%);"></div>
            {% else %}
                <!-- Dynamic Game-themed Gradient Background -->
                <div class="hero-gradient-bg w-full h-full"
                     style="background: linear-gradient(135deg, 
                            {{ tournament.game.primary_color|default:'#b91c1c' }} 0%, 
                            {{ tournament.game.secondary_color|default:'#7f1d1d' }} 50%,
                            #0f172a 100%);"></div>
                <!-- Animated Background Pattern -->
                <div class="hero-pattern absolute inset-0 opacity-10"
                     style="background-image: radial-gradient(circle at 25% 25%, {{ tournament.game.primary_color|default:'#b91c1c' }}40 0%, transparent 50%),
                            radial-gradient(circle at 75% 75%, {{ tournament.game.secondary_color|default:'#7f1d1d' }}40 0%, transparent 50%);
                            animation: float 20s ease-in-out infinite;"></div>
            {% endif %}
        </div>
        
        <!-- Enhanced Hero Overlay for Optimal Text Readability -->
        <div class="hero-overlay absolute inset-0">
            <div class="hero-overlay-gradient bg-gradient-to-r from-black/90 via-black/60 to-black/30"></div>
            <div class="hero-overlay-radial bg-radial-gradient from-transparent via-black/20 to-black/40"></div>
        </div>
        
        <div class="relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16 lg:py-20">
            <div class="flex flex-col lg:flex-row lg:items-end lg:justify-between gap-8">
                <!-- Tournament Information -->
                <div class="flex-1 space-y-6">
                    <!-- Enhanced Status and Featured Badges -->
                    <div class="flex items-center gap-3 mb-6" role="group" aria-label="Tournament status and badges">
                        <!-- Animated Tournament Status Badge -->
                        <span class="gaming-status-badge {% if tournament.status == 'registration' or tournament.status == 'in_progress' %}active{% endif %}" 
                              data-status="{{ tournament.status }}"
                              aria-label="Tournament status: {{ tournament_display.status_display }}">
                            {{ tournament.status|status_icon }}
                            <span class="status-text">{{ tournament_display.status_display }}</span>
                            {% if tournament.status == 'registration' or tournament.status == 'in_progress' %}
                                <span class="status-pulse" aria-hidden="true"></span>
                            {% endif %}
                        </span>
                        
                        <!-- Enhanced Featured Tournament Badge -->
                        {% if tournament.is_featured %}
                            <span class="gaming-featured-badge" 
                                  aria-label="Featured tournament"
                                  data-featured="true">
                                <span class="featured-icon material-symbols-outlined text-sm" aria-hidden="true">star</span>
                                <span class="featured-text">Featured</span>
                                <span class="featured-sparkle" aria-hidden="true"></span>
                            </span>
                        {% endif %}
                        
                        <!-- Tournament Type Badge -->
                        {% if tournament.tournament_type %}
                            <span class="tournament-type-badge" 
                                  aria-label="Tournament type: {{ tournament.get_tournament_type_display }}">
                                <span class="material-symbols-outlined text-sm" aria-hidden="true">category</span>
                                <span>{{ tournament.get_tournament_type_display }}</span>
                            </span>
                        {% endif %}
                    </div>

                    <!-- Enhanced Tournament Title with Game Integration -->
                    <div class="tournament-title-section">
                        <h1 id="tournament-title" 
                            class="tournament-title tournament-gaming-title text-4xl lg:text-6xl font-bold text-white mb-4 leading-tight">
                            {{ tournament_display.name|safe_default:"Tournament Name" }}
                        </h1>
                        
                        <!-- Game Badge -->
                        {% if template_flags.has_game %}
                            <div class="game-badge inline-flex items-center gap-2 px-4 py-2 bg-black/40 backdrop-blur-sm rounded-full border border-white/20 mb-6">
                                {% if tournament.game.logo %}
                                    <img src="{{ tournament.game.logo.url }}" 
                                         alt="{{ tournament_display.game_name }} logo" 
                                         class="w-6 h-6 rounded">
                                {% else %}
                                    {{ "sports_esports"|material_icon:"text-primary" }}
                                {% endif %}
                                <span class="text-white font-medium">{{ tournament_display.game_name }}</span>
                            </div>
                        {% endif %}
                    </div>

                    <!-- Enhanced Tournament Meta Information with Better Contrast -->
                    <div class="tournament-meta-info bg-black/30 backdrop-blur-sm rounded-xl p-6 border border-white/10">
                        <div class="flex flex-wrap items-center gap-6 text-gray-200" role="list">
                            {% if template_flags.has_start_datetime %}
                            <div class="meta-item flex items-center gap-2" role="listitem">
                                {{ "calendar_today"|material_icon:"text-primary" }}
                                <div class="meta-content">
                                    <span class="meta-label text-xs text-gray-400 block">Date</span>
                                    <span class="meta-value font-medium">{{ formatted_dates.start_date }}</span>
                                </div>
                            </div>
                            <div class="meta-item flex items-center gap-2" role="listitem">
                                {{ "schedule"|material_icon:"text-primary" }}
                                <div class="meta-content">
                                    <span class="meta-label text-xs text-gray-400 block">Time</span>
                                    <span class="meta-value font-medium">{{ formatted_dates.start_time }}</span>
                                </div>
                            </div>
                            {% endif %}
                            {% if template_flags.has_venue %}
                            <div class="meta-item flex items-center gap-2" role="listitem">
                                {{ "location_on"|material_icon:"text-primary" }}
                                <div class="meta-content">
                                    <span class="meta-label text-xs text-gray-400 block">Venue</span>
                                    <span class="meta-value font-medium">{{ venue_display.name }}</span>
                                </div>
                            </div>
                            {% endif %}
                            <div class="meta-item flex items-center gap-2" role="listitem">
                                {{ "account_tree"|material_icon:"text-primary" }}
                                <div class="meta-content">
                                    <span class="meta-label text-xs text-gray-400 block">Format</span>
                                    <span class="meta-value font-medium">{{ tournament_display.format_display }}</span>
                                </div>
                            </div>
                            {% if prize_display.has_prize %}
                            <div class="meta-item flex items-center gap-2" role="listitem">
                                {{ "emoji_events"|material_icon:"text-primary" }}
                                <div class="meta-content">
                                    <span class="meta-label text-xs text-gray-400 block">Prize Pool</span>
                                    <span class="meta-value font-medium text-yellow-400">{{ prize_display.formatted_amount }}</span>
                                </div>
                            </div>
                            {% endif %}
                        </div>
                    </div>
                </div>

                <!-- Enhanced Statistics Dashboard -->
                <div class="lg:flex-shrink-0">
                    <div class="stats-dashboard grid grid-cols-2 lg:grid-cols-4 gap-4" 
                         role="group" 
                         aria-label="Tournament statistics" 
                         aria-live="polite" 
                         aria-atomic="false"
                         data-updating="false"
                         data-cached="false">
                        
                        <!-- Connection Status Indicator -->
                        <div class="connection-status status-connected sr-only" aria-live="polite">
                            <span class="status-icon material-symbols-outlined">wifi</span>
                            <span class="status-text">Connected</span>
                        </div>
                        
                        <!-- Update Indicator -->
                        <div class="update-indicator" aria-label="Tournament data up to date">
                            <span class="material-symbols-outlined">sync</span>
                        </div>
                        
                        <div class="gaming-stat-card" data-stat="participants" role="img" aria-label="Registered participants: {{ participant_display.registered_count }} out of {{ participant_display.max_participants }}">
                            <div class="gaming-stat-value" data-value="{{ participant_display.registered_count }}">
                                {{ participant_display.registered_count|safe_default:"0" }}
                            </div>
                            <div class="gaming-stat-label">Registered</div>
                            <div class="gaming-progress-bar">
                                <div class="gaming-progress-fill" 
                                     style="width: {{ participant_display.percentage_full|format_percentage:0 }}"
                                     aria-label="Registration progress: {{ participant_display.percentage_full|format_percentage:0 }} full">
                                </div>
                            </div>
                        </div>
                        {% if prize_display.has_prize %}
                        <div class="gaming-stat-card" data-stat="prize-pool" role="img" aria-label="Prize pool: {{ prize_display.formatted_amount }}">
                            <div class="gaming-stat-value" data-value="{{ tournament.prize_pool|safe_default:'0' }}">
                                {{ prize_display.formatted_amount }}
                            </div>
                            <div class="gaming-stat-label">Prize Pool</div>
                        </div>
                        {% else %}
                        <div class="gaming-stat-card" data-stat="prize-pool" role="img" aria-label="Prize pool: Free tournament">
                            <div class="gaming-stat-value" data-value="0">
                                Free
                            </div>
                            <div class="gaming-stat-label">Tournament</div>
                        </div>
                        {% endif %}
                        <div class="gaming-stat-card" data-stat="views" role="img" aria-label="Tournament views: {{ tournament_stats.engagement.views|safe_default:'0' }}">
                            <div class="gaming-stat-value" data-value="{{ tournament_stats.engagement.views|safe_default:'0' }}">
                                {{ tournament_stats.engagement.views|safe_default:"0" }}
                            </div>
                            <div class="gaming-stat-label">Views</div>
                        </div>
                        <div class="gaming-stat-card" data-stat="capacity" role="img" aria-label="Maximum participants: {{ participant_display.max_participants }}">
                            <div class="gaming-stat-value" data-value="{{ participant_display.max_participants }}">
                                {{ participant_display.max_participants|safe_default:"âˆž" }}
                            </div>
                            <div class="gaming-stat-label">Max Players</div>
                        </div>
                    </div>
                    
                    <!-- Real-time Update Error Handling -->
                    <div class="real-time-status mt-4 flex items-center justify-between text-sm text-gray-400">
                        <div class="flex items-center gap-2">
                            <span class="last-updated" title="Last updated time">
                                Last updated: {{ now|time:"H:i" }}
                            </span>
                            <div class="connection-status status-connected" aria-label="Connection status: connected">
                                <span class="status-icon material-symbols-outlined text-xs">wifi</span>
                            </div>
                        </div>
                        
                        <div class="retry-controls flex items-center gap-2">
                            <div class="retry-info" style="display: none;" aria-live="polite"></div>
                            <button class="retry-button btn-sm" 
                                    style="display: none;"
                                    aria-label="Retry connection">
                                <span class="material-symbols-outlined text-sm">refresh</span>
                                Retry
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Interactive Tournament Timeline -->
            {% if tournament.status != 'draft' %}
            <div class="tournament-timeline mt-8" 
                 data-tournament-status="{{ tournament.status }}"
                 data-registration-start="{{ tournament.registration_start|date:'c' }}"
                 data-registration-end="{{ tournament.registration_end|date:'c' }}"
                 data-check-in-start="{{ tournament.check_in_start|date:'c' }}"
                 data-start-datetime="{{ tournament.start_datetime|date:'c' }}"
                 {% if tournament.estimated_end %}data-estimated-end="{{ tournament.estimated_end|date:'c' }}"{% endif %}>
                
                <div class="timeline-progress-line">
                    <div class="timeline-progress-fill" 
                         style="width: {{ tournament_stats.timeline.progress_percentage|default:0 }}%"
                         aria-label="Tournament progress: {{ tournament_stats.timeline.progress_percentage|default:0 }}%">
                    </div>
                </div>
                
                <div class="timeline-phases flex justify-between">
                    <!-- Registration Phase -->
                    <div class="timeline-phase" data-phase="registration">
                        {% now "c" as current_time %}
                        {% if tournament.status == 'registration' %}
                            <div class="phase-indicator active"
                                 aria-label="Registration phase - Currently Active">
                                <span class="material-symbols-outlined" aria-hidden="true">how_to_reg</span>
                            </div>
                        {% elif tournament.status == 'check_in' or tournament.status == 'in_progress' or tournament.status == 'completed' %}
                            <div class="phase-indicator completed"
                                 aria-label="Registration phase - Completed">
                                <span class="material-symbols-outlined" aria-hidden="true">how_to_reg</span>
                            </div>
                        {% else %}
                            <div class="phase-indicator pending"
                                 aria-label="Registration phase - Pending">
                                <span class="material-symbols-outlined" aria-hidden="true">how_to_reg</span>
                            </div>
                        {% endif %}
                        <div class="phase-label">Registration</div>
                        <div class="phase-date">{{ tournament.registration_start|date:"M d" }}</div>
                        {% if tournament.status == 'registration' %}
                            <div class="phase-countdown" data-target="{{ tournament.registration_end|date:'c' }}">
                                <span class="countdown-label">Ends in:</span>
                                <span class="countdown-timer">--:--:--</span>
                            </div>
                        {% endif %}
                    </div>
                    
                    <!-- Check-in Phase -->
                    <div class="timeline-phase" data-phase="check_in">
                        {% if tournament.status == 'check_in' %}
                            <div class="phase-indicator active"
                                 aria-label="Check-in phase - Currently Active">
                                <span class="material-symbols-outlined" aria-hidden="true">check_circle</span>
                            </div>
                        {% elif tournament.status == 'in_progress' or tournament.status == 'completed' %}
                            <div class="phase-indicator completed"
                                 aria-label="Check-in phase - Completed">
                                <span class="material-symbols-outlined" aria-hidden="true">check_circle</span>
                            </div>
                        {% else %}
                            <div class="phase-indicator pending"
                                 aria-label="Check-in phase - Pending">
                                <span class="material-symbols-outlined" aria-hidden="true">check_circle</span>
                            </div>
                        {% endif %}
                        <div class="phase-label">Check-in</div>
                        <div class="phase-date">{{ tournament.start_datetime|date:"M d" }}</div>
                        {% if tournament.status == 'check_in' %}
                            <div class="phase-countdown" data-target="{{ tournament.start_datetime|date:'c' }}">
                                <span class="countdown-label">Starts in:</span>
                                <span class="countdown-timer">--:--:--</span>
                            </div>
                        {% endif %}
                    </div>
                    
                    <!-- Tournament Phase -->
                    <div class="timeline-phase" data-phase="tournament">
                        {% if tournament.status == 'in_progress' %}
                            <div class="phase-indicator active"
                                 aria-label="Tournament phase - Currently Active">
                                <span class="material-symbols-outlined" aria-hidden="true">play_arrow</span>
                            </div>
                        {% elif tournament.status == 'completed' %}
                            <div class="phase-indicator completed"
                                 aria-label="Tournament phase - Completed">
                                <span class="material-symbols-outlined" aria-hidden="true">play_arrow</span>
                            </div>
                        {% else %}
                            <div class="phase-indicator pending"
                                 aria-label="Tournament phase - Pending">
                                <span class="material-symbols-outlined" aria-hidden="true">play_arrow</span>
                            </div>
                        {% endif %}
                        <div class="phase-label">Tournament</div>
                        <div class="phase-date">{{ tournament.start_datetime|date:"M d" }}</div>
                        {% if tournament.status == 'in_progress' and tournament.estimated_end %}
                            <div class="phase-countdown" data-target="{{ tournament.estimated_end|date:'c' }}">
                                <span class="countdown-label">Ends in:</span>
                                <span class="countdown-timer">--:--:--</span>
                            </div>
                        {% endif %}
                    </div>
                    
                    <!-- Results Phase -->
                    <div class="timeline-phase" data-phase="results">
                        {% if tournament.status == 'completed' %}
                            <div class="phase-indicator completed"
                                 aria-label="Results phase - Completed">
                                <span class="material-symbols-outlined" aria-hidden="true">emoji_events</span>
                            </div>
                        {% else %}
                            <div class="phase-indicator pending"
                                 aria-label="Results phase - Pending">
                                <span class="material-symbols-outlined" aria-hidden="true">emoji_events</span>
                            </div>
                        {% endif %}
                        <div class="phase-label">Results</div>
                        <div class="phase-date">
                            {% if tournament.actual_end %}
                                {{ tournament.actual_end|date:"M d" }}
                            {% elif tournament.estimated_end %}
                                {{ tournament.estimated_end|date:"M d" }}
                            {% else %}
                                TBD
                            {% endif %}
                        </div>
                        {% if tournament.status == 'completed' and tournament.actual_end %}
                            <div class="phase-timestamp">
                                <span class="timestamp-label">Completed:</span>
                                <span class="timestamp-value">{{ tournament.actual_end|date:"M d, g:i A" }}</span>
                            </div>
                        {% endif %}
                    </div>
                </div>
            </div>
            {% endif %}
        </div>
    </section>

    <!-- Main Content -->
    <main id="main-content" class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8" role="main" aria-label="Tournament details and information">
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <!-- Main Content Area -->
            <div class="lg:col-span-2 space-y-8">
                <!-- Enhanced Tab Navigation System -->
                <div class="tab-navigation">
                    <div class="gaming-tab-nav" role="tablist" aria-label="Tournament information tabs">
                        <button id="details-tab-button" class="gaming-tab-item active" data-tab="details" role="tab" aria-selected="true" tabindex="0">
                            <span class="material-symbols-outlined">info</span>
                            Details
                        </button>
                        {% if tournament.status == 'in_progress' or tournament.status == 'completed' or tournament.brackets.exists %}
                        <button id="bracket-tab-button" class="gaming-tab-item" data-tab="bracket" role="tab" aria-selected="false" tabindex="-1">
                            <span class="material-symbols-outlined">account_tree</span>
                            Bracket
                        </button>
                        {% endif %}
                        <button id="participants-tab-button" class="gaming-tab-item" data-tab="participants" role="tab" aria-selected="false" tabindex="-1">
                            <span class="material-symbols-outlined">group</span>
                            Participants
                        </button>
                        <button id="rules-tab-button" class="gaming-tab-item" data-tab="rules" role="tab" aria-selected="false" tabindex="-1">
                            <span class="material-symbols-outlined">gavel</span>
                            Rules
                        </button>
                        {% if tournament.prize_pool > 0 %}
                        <button id="prizes-tab-button" class="gaming-tab-item" data-tab="prizes" role="tab" aria-selected="false" tabindex="-1">
                            <span class="material-symbols-outlined">emoji_events</span>
                            Prizes
                        </button>
                        {% endif %}
                    </div>
                </div>

                <!-- Tab Content -->
                <div class="tab-content">
                    <!-- Details Tab -->
                    <div id="details-tab" class="tab-pane active" role="tabpanel" aria-labelledby="details-tab-button">
                        <!-- Tournament Description -->
                        <div class="gaming-info-card">
                            <h3 class="gaming-section-title">
                                <span class="material-symbols-outlined">info</span>
                                About This Tournament
                            </h3>
                            <div class="prose prose-invert max-w-none">
                                {{ tournament.description|linebreaks }}
                            </div>
                        </div>

                        <!-- Tournament Statistics -->
                        <div class="gaming-info-card">
                            <h3 class="gaming-section-title">
                                <span class="material-symbols-outlined">analytics</span>
                                Tournament Statistics
                            </h3>
                            <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                                <div class="gaming-stat-item">
                                    <div class="gaming-stat-icon">
                                        <span class="material-symbols-outlined">group</span>
                                    </div>
                                    <div>
                                        <div class="gaming-stat-number">{{ tournament_stats.participants.registered }}</div>
                                        <div class="gaming-stat-description">Registered</div>
                                    </div>
                                </div>
                                <div class="gaming-stat-item">
                                    <div class="gaming-stat-icon">
                                        <span class="material-symbols-outlined">check_circle</span>
                                    </div>
                                    <div>
                                        <div class="gaming-stat-number">{{ tournament_stats.participants.checked_in }}</div>
                                        <div class="gaming-stat-description">Checked In</div>
                                    </div>
                                </div>
                                <div class="gaming-stat-item">
                                    <div class="gaming-stat-icon">
                                        <span class="material-symbols-outlined">sports_esports</span>
                                    </div>
                                    <div>
                                        <div class="gaming-stat-number">{{ tournament_stats.matches.completed }}</div>
                                        <div class="gaming-stat-description">Matches Played</div>
                                    </div>
                                </div>
                                <div class="gaming-stat-item">
                                    <div class="gaming-stat-icon">
                                        <span class="material-symbols-outlined">visibility</span>
                                    </div>
                                    <div>
                                        <div class="gaming-stat-number">{{ tournament_stats.engagement.views }}</div>
                                        <div class="gaming-stat-description">Views</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Recent Matches -->
                        {% if recent_matches %}
                        <div class="gaming-info-card">
                            <h3 class="gaming-section-title">
                                <span class="material-symbols-outlined">sports_esports</span>
                                Recent Matches
                            </h3>
                            <div class="space-y-3">
                                {% for match in recent_matches %}
                                <div class="match-item">
                                    <div class="flex items-center justify-between">
                                        <div class="flex items-center space-x-4">
                                            <div class="participant-info">
                                                <span class="participant-name">{{ match.participant1.display_name }}</span>
                                            </div>
                                            <div class="match-score">
                                                <span class="score">{{ match.score_p1 }} - {{ match.score_p2 }}</span>
                                            </div>
                                            <div class="participant-info">
                                                <span class="participant-name">{{ match.participant2.display_name }}</span>
                                            </div>
                                        </div>
                                        <div class="match-meta">
                                            <span class="text-sm text-gray-400">{{ match.completed_at|safe_timesince:"Recently completed" }}</span>
                                        </div>
                                    </div>
                                </div>
                                {% endfor %}
                            </div>
                        </div>
                        {% endif %}
                    </div>

                    <!-- Bracket Tab -->
                    {% if tournament.status == 'in_progress' or tournament.status == 'completed' or tournament.brackets.exists %}
                    <div id="bracket-tab" class="tab-pane" role="tabpanel" aria-labelledby="bracket-tab-button">
                        <div class="gaming-info-card">
                            <h3 class="gaming-section-title">
                                <span class="material-symbols-outlined">account_tree</span>
                                Tournament Bracket
                            </h3>
                            {% if brackets %}
                                <!-- Display actual bracket content -->
                                {% for bracket in brackets %}
                                <div class="mb-8">
                                    <!-- Bracket Header -->
                                    <div class="bg-gray-800/30 backdrop-blur-lg rounded-lg p-4 mb-6">
                                        <div class="flex items-center justify-between">
                                            <div>
                                                <h4 class="text-xl font-bold text-white flex items-center">
                                                    <span class="material-symbols-outlined text-[#b91c1c] mr-3">emoji_events</span>
                                                    {{ bracket.name }}
                                                </h4>
                                                <p class="text-gray-300 mt-1">{{ bracket.total_rounds }} rounds â€¢ {{ bracket.matches.count }} matches</p>
                                            </div>
                                            
                                            <!-- Bracket Stats -->
                                            <div class="text-right">
                                                <div class="text-sm text-gray-400">Matches Completed</div>
                                                <div class="text-lg font-bold text-white">
                                                    {{ bracket.completed_matches }}/{{ bracket.total_matches }}
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Bracket Container with Horizontal Scroll -->
                                    <div class="bg-gray-800/30 backdrop-blur-lg rounded-xl border border-white/10 overflow-hidden">
                                        <div class="overflow-x-auto">
                                            <div class="p-6 min-w-max">
                                                <div class="flex space-x-8 relative">
                                                    {% for round_num, matches in matches_by_bracket|get_item:bracket.id|dict_items %}
                                                    <!-- Round Column -->
                                                    <div class="flex flex-col space-y-4 min-w-[250px] relative">
                                                        <!-- Round Header -->
                                                        <div class="text-center mb-4">
                                                            <div class="bg-gray-700/50 rounded-lg p-2">
                                                                <h5 class="text-sm font-bold text-white">
                                                                    {% if round_num == bracket.total_rounds %}
                                                                        ðŸ† Finals
                                                                    {% elif round_num == bracket.total_rounds|add:"-1" %}
                                                                        ðŸ¥ˆ Semi-Finals
                                                                    {% elif round_num == bracket.total_rounds|add:"-2" %}
                                                                        ðŸ¥‰ Quarter-Finals
                                                                    {% else %}
                                                                        Round {{ round_num }}
                                                                    {% endif %}
                                                                </h5>
                                                                <p class="text-xs text-gray-300 mt-1">{{ matches|length }} match{{ matches|length|pluralize:"es" }}</p>
                                                            </div>
                                                        </div>
                                                        
                                                        <!-- Matches in Round -->
                                                        {% for match in matches %}
                                                        <div class="gaming-match-item">
                                                            <!-- Match Header -->
                                                            <div class="flex items-center justify-between mb-3">
                                                                <span class="text-xs font-medium text-gray-400">Match {{ match.match_number }}</span>
                                                                
                                                                <!-- Match Status Badge -->
                                                                <div class="text-xs px-2 py-1 rounded-full
                                                                    {% if match.status == 'completed' %}bg-green-500/20 text-green-400
                                                                    {% elif match.status == 'in_progress' %}bg-yellow-500/20 text-yellow-400
                                                                    {% elif match.status == 'ready' %}bg-blue-500/20 text-blue-400
                                                                    {% else %}bg-gray-500/20 text-gray-400{% endif %}">
                                                                    {% if match.status == 'completed' %}âœ“ Done
                                                                    {% elif match.status == 'in_progress' %}â— Live
                                                                    {% elif match.status == 'ready' %}â–¶ Ready
                                                                    {% else %}â³ Pending{% endif %}
                                                                </div>
                                                            </div>
                                                            
                                                            <!-- Participant 1 -->
                                                            <div class="flex items-center justify-between p-2 rounded 
                                                                {% if match.winner == match.participant1 %}bg-green-500/10 border border-green-500/30
                                                                {% elif match.status == 'completed' %}bg-gray-600/20{% endif %} mb-1">
                                                                <div class="flex items-center space-x-2 flex-1 min-w-0">
                                                                    {% if match.participant1 %}
                                                                    <div class="w-6 h-6 rounded-full bg-[#b91c1c] flex items-center justify-center text-white text-xs font-bold">
                                                                        {{ match.participant1.display_name|first|upper }}
                                                                    </div>
                                                                    <span class="text-white text-sm truncate">{{ match.participant1.display_name }}</span>
                                                                    {% if match.winner == match.participant1 %}
                                                                    <span class="text-green-400 text-xs">ðŸ‘‘</span>
                                                                    {% endif %}
                                                                    {% else %}
                                                                    <div class="w-6 h-6 rounded-full bg-gray-600 flex items-center justify-center">
                                                                        <span class="text-gray-400 text-xs">?</span>
                                                                    </div>
                                                                    <span class="text-gray-400 text-sm italic">TBD</span>
                                                                    {% endif %}
                                                                </div>
                                                                {% if match.status == 'completed' %}
                                                                <div class="text-sm font-bold 
                                                                    {% if match.winner == match.participant1 %}text-green-400
                                                                    {% else %}text-gray-500{% endif %}">
                                                                    {{ match.score_p1|default:"-" }}
                                                                </div>
                                                                {% endif %}
                                                            </div>
                                                            
                                                            <!-- VS Divider -->
                                                            <div class="text-center py-1">
                                                                <span class="text-xs text-gray-500">vs</span>
                                                            </div>
                                                            
                                                            <!-- Participant 2 -->
                                                            <div class="flex items-center justify-between p-2 rounded 
                                                                {% if match.winner == match.participant2 %}bg-green-500/10 border border-green-500/30
                                                                {% elif match.status == 'completed' %}bg-gray-600/20{% endif %}">
                                                                <div class="flex items-center space-x-2 flex-1 min-w-0">
                                                                    {% if match.participant2 %}
                                                                    <div class="w-6 h-6 rounded-full bg-[#b91c1c] flex items-center justify-center text-white text-xs font-bold">
                                                                        {{ match.participant2.display_name|first|upper }}
                                                                    </div>
                                                                    <span class="text-white text-sm truncate">{{ match.participant2.display_name }}</span>
                                                                    {% if match.winner == match.participant2 %}
                                                                    <span class="text-green-400 text-xs">ðŸ‘‘</span>
                                                                    {% endif %}
                                                                    {% else %}
                                                                    <div class="w-6 h-6 rounded-full bg-gray-600 flex items-center justify-center">
                                                                        <span class="text-gray-400 text-xs">?</span>
                                                                    </div>
                                                                    <span class="text-gray-400 text-sm italic">TBD</span>
                                                                    {% endif %}
                                                                </div>
                                                                {% if match.status == 'completed' %}
                                                                <div class="text-sm font-bold 
                                                                    {% if match.winner == match.participant2 %}text-green-400
                                                                    {% else %}text-gray-500{% endif %}">
                                                                    {{ match.score_p2|default:"-" }}
                                                                </div>
                                                                {% endif %}
                                                            </div>
                                                        </div>
                                                        {% endfor %}
                                                    </div>
                                                    {% endfor %}
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- View Full Bracket Link -->
                                    <div class="text-center mt-4">
                                        <a href="{% url 'tournaments:bracket' tournament.slug %}" 
                                           class="inline-flex items-center px-4 py-2 bg-[#b91c1c] text-white rounded-lg hover:bg-[#b91c1c]/90 transition font-medium text-sm">
                                            <span class="material-symbols-outlined text-sm mr-2">fullscreen</span>
                                            View Full Bracket
                                        </a>
                                    </div>
                                </div>
                                {% endfor %}
                            {% else %}
                                <div class="text-center py-8">
                                    <span class="material-symbols-outlined text-4xl text-gray-500 mb-4">pending</span>
                                    <p class="text-gray-400">Bracket not yet generated</p>
                                </div>
                            {% endif %}
                        </div>
                    </div>
                    {% endif %}

                    <!-- Enhanced Participants Tab -->
                    <div id="participants-tab" class="tab-pane" role="tabpanel" aria-labelledby="participants-tab-button">
                        <div class="gaming-info-card">
                            <div class="flex items-center justify-between mb-6">
                                <h3 class="gaming-section-title">
                                    <span class="material-symbols-outlined">group</span>
                                    Participants ({{ tournament_stats.participants.registered }})
                                </h3>
                                {% if participants %}
                                <div class="participant-filters flex items-center gap-3">
                                    <button class="gaming-filter-btn active" data-filter="all" aria-label="Show all participants">
                                        <span class="material-symbols-outlined text-sm">group</span>
                                        All
                                    </button>
                                    <button class="gaming-filter-btn" data-filter="teams" aria-label="Show team participants only">
                                        <span class="material-symbols-outlined text-sm">groups</span>
                                        Teams
                                    </button>
                                    <button class="gaming-filter-btn" data-filter="individuals" aria-label="Show individual participants only">
                                        <span class="material-symbols-outlined text-sm">person</span>
                                        Individuals
                                    </button>
                                    {% if tournament.status == 'check_in' or tournament.status == 'in_progress' %}
                                    <button class="gaming-filter-btn" data-filter="checked-in" aria-label="Show checked-in participants only">
                                        <span class="material-symbols-outlined text-sm">check_circle</span>
                                        Checked In
                                    </button>
                                    {% endif %}
                                </div>
                                {% endif %}
                            </div>
                            
                            {% if participants %}
                            <div class="enhanced-participant-grid">
                                {% for participant in participants %}
                                <div class="enhanced-participant-card" 
                                     data-participant-type="{% if participant.team %}team{% else %}individual{% endif %}"
                                     data-checked-in="{{ participant.checked_in|yesno:'true,false' }}"
                                     data-seed="{{ participant.seed|default:'none' }}">
                                    
                                    <!-- Participant Avatar Section -->
                                    <div class="participant-avatar-section">
                                        {% if participant.team %}
                                            <!-- Team Logo/Avatar -->
                                            {% if participant.team.logo %}
                                                <img src="{{ participant.team.logo.url }}" 
                                                     alt="{{ participant.team.name }} logo" 
                                                     class="participant-avatar team-logo"
                                                     loading="lazy"
                                                     decoding="async"
                                                     width="64"
                                                     height="64">
                                            {% else %}
                                                <div class="participant-avatar team-avatar-fallback">
                                                    <span class="material-symbols-outlined text-primary">groups</span>
                                                </div>
                                            {% endif %}
                                        {% else %}
                                            <!-- Individual User Avatar -->
                                            {% if participant.user.avatar %}
                                                <img src="{{ participant.user.avatar.url }}" 
                                                     alt="{{ participant.display_name }} avatar" 
                                                     class="participant-avatar user-avatar"
                                                     loading="lazy"
                                                     decoding="async"
                                                     width="64"
                                                     height="64">
                                            {% elif participant.user.avatar_url %}
                                                <img src="{{ participant.user.avatar_url }}" 
                                                     alt="{{ participant.display_name }} avatar" 
                                                     class="participant-avatar user-avatar"
                                                     loading="lazy"
                                                     decoding="async"
                                                     width="64"
                                                     height="64">
                                            {% else %}
                                                <div class="participant-avatar user-avatar-fallback">
                                                    <span class="material-symbols-outlined text-primary">person</span>
                                                </div>
                                            {% endif %}
                                        {% endif %}
                                        
                                        <!-- Status Indicator Overlay -->
                                        {% if participant.checked_in %}
                                            <div class="status-indicator checked-in" 
                                                 aria-label="Checked in"
                                                 title="Participant has checked in">
                                                <span class="material-symbols-outlined">check_circle</span>
                                            </div>
                                        {% elif tournament.status == 'check_in' %}
                                            <div class="status-indicator pending" 
                                                 aria-label="Not checked in"
                                                 title="Participant has not checked in yet">
                                                <span class="material-symbols-outlined">schedule</span>
                                            </div>
                                        {% endif %}
                                    </div>
                                    
                                    <!-- Participant Information Section -->
                                    <div class="participant-info-section">
                                        <div class="participant-primary-info">
                                            <div class="participant-name-container">
                                                <h4 class="participant-name">{{ participant.display_name }}</h4>
                                                {% if participant.seed %}
                                                    <span class="seed-badge" 
                                                          aria-label="Seed position {{ participant.seed }}"
                                                          title="Tournament seed #{{ participant.seed }}">
                                                        #{{ participant.seed }}
                                                    </span>
                                                {% endif %}
                                            </div>
                                            
                                            <!-- Team Information Display -->
                                            {% if participant.team %}
                                                <div class="team-info">
                                                    <div class="team-name-tag">
                                                        <span class="team-name">{{ participant.team.name }}</span>
                                                        {% if participant.team.tag %}
                                                            <span class="team-tag">[{{ participant.team.tag }}]</span>
                                                        {% endif %}
                                                    </div>
                                                    
                                                    <!-- Team Member Count -->
                                                    <div class="team-member-count" 
                                                         aria-label="{{ participant.team.member_count }} team members">
                                                        <span class="material-symbols-outlined text-xs">group</span>
                                                        <span class="member-count-text">{{ participant.team.member_count }} members</span>
                                                    </div>
                                                    
                                                    <!-- Team Captain Indicator -->
                                                    {% if participant.user == participant.team.captain %}
                                                        <div class="captain-badge" 
                                                             aria-label="Team captain"
                                                             title="Team captain">
                                                            <span class="material-symbols-outlined text-xs">star</span>
                                                            <span>Captain</span>
                                                        </div>
                                                    {% endif %}
                                                </div>
                                            {% endif %}
                                        </div>
                                        
                                        <!-- Participant Statistics and Ratings -->
                                        <div class="participant-stats">
                                            {% if participant.matches_won > 0 or participant.matches_lost > 0 %}
                                                <div class="match-record" 
                                                     aria-label="Match record: {{ participant.matches_won }} wins, {{ participant.matches_lost }} losses">
                                                    <span class="material-symbols-outlined text-xs">sports_esports</span>
                                                    <span class="record-text">{{ participant.matches_won }}W - {{ participant.matches_lost }}L</span>
                                                    {% if participant.win_rate > 0 %}
                                                        <span class="win-rate">({{ participant.win_rate }}%)</span>
                                                    {% endif %}
                                                </div>
                                            {% endif %}
                                            
                                            <!-- Registration Date -->
                                            <div class="registration-info" 
                                                 aria-label="Registered on {{ participant.registered_at|date:'M d, Y' }}">
                                                <span class="material-symbols-outlined text-xs">calendar_today</span>
                                                <span class="registration-date">{{ participant.registered_at|date:"M d, Y" }}</span>
                                            </div>
                                            
                                            <!-- Check-in Time (if checked in) -->
                                            {% if participant.checked_in and participant.check_in_time %}
                                                <div class="checkin-info" 
                                                     aria-label="Checked in at {{ participant.check_in_time|date:'M d, g:i A' }}">
                                                    <span class="material-symbols-outlined text-xs">check_circle</span>
                                                    <span class="checkin-time">{{ participant.check_in_time|date:"M d, g:i A" }}</span>
                                                </div>
                                            {% endif %}
                                        </div>
                                    </div>
                                    
                                    <!-- Participant Actions -->
                                    <div class="participant-actions">
                                        {% if participant.team %}
                                            <a href="{% url 'teams:detail' slug=participant.team.slug %}" 
                                               class="action-btn view-team"
                                               aria-label="View {{ participant.team.name }} team profile">
                                                <span class="material-symbols-outlined text-sm">groups</span>
                                                <span>View Team</span>
                                            </a>
                                        {% else %}
                                            <button class="action-btn view-profile" 
                                                    disabled
                                                    aria-label="View {{ participant.display_name }} profile">
                                                <span class="material-symbols-outlined text-sm">person</span>
                                                <span>View Profile</span>
                                            </button>
                                        {% endif %}
                                        
                                        <!-- Tournament-specific actions for organizers -->
                                        {% if user == tournament.organizer %}
                                            <div class="organizer-actions">
                                                {% if not participant.checked_in and tournament.status == 'check_in' %}
                                                    <button class="action-btn check-in-btn" 
                                                            data-participant-id="{{ participant.id }}"
                                                            aria-label="Check in {{ participant.display_name }}">
                                                        <span class="material-symbols-outlined text-sm">check_circle</span>
                                                        <span>Check In</span>
                                                    </button>
                                                {% endif %}
                                                
                                                {% if tournament.status == 'registration' %}
                                                    <button class="action-btn seed-btn" 
                                                            data-participant-id="{{ participant.id }}"
                                                            aria-label="Set seed for {{ participant.display_name }}">
                                                        <span class="material-symbols-outlined text-sm">format_list_numbered</span>
                                                        <span>Set Seed</span>
                                                    </button>
                                                {% endif %}
                                            </div>
                                        {% endif %}
                                    </div>
                                </div>
                                {% endfor %}
                            </div>
                            
                            <!-- Participant Summary Statistics -->
                            <div class="participant-summary mt-6 pt-6 border-t border-gray-700/50">
                                <div class="summary-stats grid grid-cols-2 md:grid-cols-4 gap-4">
                                    <div class="summary-stat">
                                        <div class="stat-value">{{ tournament_stats.participants.registered }}</div>
                                        <div class="stat-label">Total Registered</div>
                                    </div>
                                    <div class="summary-stat">
                                        <div class="stat-value">{{ tournament_stats.participants.checked_in }}</div>
                                        <div class="stat-label">Checked In</div>
                                    </div>
                                    <div class="summary-stat">
                                        <div class="stat-value">
                                            {% with team_count=participants|length %}
                                                {% for participant in participants %}
                                                    {% if participant.team and forloop.first %}1{% elif participant.team %}{% endif %}
                                                {% empty %}0{% endfor %}
                                            {% endwith %}
                                        </div>
                                        <div class="stat-label">Teams</div>
                                    </div>
                                    <div class="summary-stat">
                                        <div class="stat-value">{{ tournament_stats.participants.spots_remaining|default:0 }}</div>
                                        <div class="stat-label">Spots Remaining</div>
                                    </div>
                                </div>
                            </div>
                            
                            {% else %}
                            <!-- Enhanced Empty State -->
                            <div class="empty-state text-center py-12">
                                <div class="empty-state-icon mb-4">
                                    <span class="material-symbols-outlined text-6xl text-gray-500" aria-hidden="true">group_off</span>
                                </div>
                                <h4 class="empty-state-title text-xl font-semibold text-gray-300 mb-2">No participants yet</h4>
                                <p class="empty-state-description text-gray-400 mb-6">
                                    {% if tournament.status == 'registration' %}
                                        Be the first to register for this tournament!
                                    {% elif tournament.status == 'draft' %}
                                        Registration will open soon.
                                    {% else %}
                                        Registration has ended.
                                    {% endif %}
                                </p>
                                {% if tournament.status == 'registration' and user.is_authenticated %}
                                    <a href="{% url 'tournaments:register' slug=tournament.slug %}" 
                                       class="btn btn-primary">
                                        <span class="material-symbols-outlined text-sm">person_add</span>
                                        Register Now
                                    </a>
                                {% endif %}
                            </div>
                            {% endif %}
                        </div>
                    </div>

                    <!-- Rules Tab -->
                    <div id="rules-tab" class="tab-pane" role="tabpanel" aria-labelledby="rules-tab-button">
                        <div class="gaming-info-card">
                            <h3 class="gaming-section-title">
                                <span class="material-symbols-outlined">gavel</span>
                                Tournament Rules
                            </h3>
                            {% if tournament.rules %}
                                <div class="prose prose-invert max-w-none">
                                    {{ tournament.rules|linebreaks }}
                                </div>
                            {% else %}
                                <div class="text-center py-8">
                                    <span class="material-symbols-outlined text-4xl text-gray-500 mb-4">gavel</span>
                                    <p class="text-gray-400">No specific rules posted</p>
                                    <p class="text-sm text-gray-500 mt-2">Standard {{ tournament.game.name }} rules apply</p>
                                </div>
                            {% endif %}
                        </div>
                    </div>

                    <!-- Enhanced Prizes Tab with Visual Prize Pool Breakdown -->
                    {% if tournament.prize_pool > 0 %}
                    <div id="prizes-tab" class="tab-pane" role="tabpanel" aria-labelledby="prizes-tab-button">
                        <div class="gaming-info-card">
                            <h3 class="gaming-section-title">
                                <span class="material-symbols-outlined">emoji_events</span>
                                Prize Distribution
                            </h3>
                            
                            <!-- Prize Pool Total Display -->
                            <div class="prize-pool-total">
                                <div class="text-center mb-8">
                                    <div class="prize-pool-amount">
                                        <span class="text-4xl lg:text-5xl font-bold text-primary">${{ tournament.prize_pool|floatformat:0|intcomma }}</span>
                                        <div class="text-gray-400 text-lg mt-2">Total Prize Pool</div>
                                    </div>
                                    
                                    <!-- Entry Fee Contribution Display -->
                                    {% if tournament.registration_fee > 0 %}
                                    <div class="entry-fee-contribution mt-4 p-4 bg-gray-800/30 rounded-lg border border-gray-700/50">
                                        <div class="text-sm text-gray-400 mb-2">Prize Pool Breakdown</div>
                                        <div class="flex justify-between items-center text-sm">
                                            <span class="text-gray-300">Entry Fees ({{ tournament.total_registered }} Ã— ${{ tournament.registration_fee }})</span>
                                            <span class="text-green-400 font-medium">${{ tournament.registration_fee|multiply:tournament.total_registered|floatformat:0 }}</span>
                                        </div>
                                        {% if tournament.prize_pool > tournament.registration_fee|multiply:tournament.total_registered %}
                                        <div class="flex justify-between items-center text-sm mt-1">
                                            <span class="text-gray-300">Additional Sponsorship</span>
                                            <span class="text-blue-400 font-medium">${{ tournament.prize_pool|sub:tournament.registration_fee|multiply:tournament.total_registered|floatformat:0 }}</span>
                                        </div>
                                        {% endif %}
                                    </div>
                                    {% endif %}
                                </div>
                            </div>
                            
                            <!-- Enhanced Prize Breakdown with Gold, Silver, Bronze Styling -->
                            {% if prize_distribution %}
                            <div class="prize-breakdown space-y-4">
                                {% for prize in prize_distribution %}
                                <div class="prize-item prize-tier-{{ prize.color }} {% if prize.is_top_three %}prize-top-three{% endif %}" 
                                     data-placement="{{ prize.placement }}"
                                     aria-label="Prize for {{ prize.placement }} place: {{ prize.formatted_amount }}">
                                    
                                    <!-- Prize Position with Tier-Specific Styling -->
                                    <div class="prize-position">
                                        <div class="prize-rank-container">
                                            <!-- Medal/Trophy Icon -->
                                            <div class="prize-icon {{ prize.placement }}-place">
                                                {% if prize.placement == '1st' %}
                                                    <span class="prize-medal gold-medal" aria-hidden="true">ðŸ¥‡</span>
                                                {% elif prize.placement == '2nd' %}
                                                    <span class="prize-medal silver-medal" aria-hidden="true">ðŸ¥ˆ</span>
                                                {% elif prize.placement == '3rd' %}
                                                    <span class="prize-medal bronze-medal" aria-hidden="true">ðŸ¥‰</span>
                                                {% else %}
                                                    <span class="material-symbols-outlined text-2xl" aria-hidden="true">emoji_events</span>
                                                {% endif %}
                                            </div>
                                            
                                            <!-- Placement Text -->
                                            <div class="prize-rank-text">
                                                <div class="prize-placement-label">{{ prize.placement }} Place</div>
                                                <div class="prize-percentage">{{ prize.percentage }}% of pool</div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Prize Amount with Gradient Background -->
                                    <div class="prize-amount-container">
                                        <div class="prize-amount bg-gradient-to-r {{ prize.gradient }}">
                                            <span class="prize-currency">$</span>
                                            <span class="prize-value">{{ prize.amount|floatformat:0|intcomma }}</span>
                                        </div>
                                        
                                        <!-- Prize Amount Breakdown -->
                                        <div class="prize-breakdown-detail">
                                            <span class="text-xs text-gray-500">{{ prize.percentage }}% Ã— ${{ tournament.prize_pool|floatformat:0|intcomma }}</span>
                                        </div>
                                    </div>
                                </div>
                                {% endfor %}
                            </div>
                            
                            <!-- Prize Distribution Summary -->
                            <div class="prize-summary mt-8 pt-6 border-t border-gray-700/50">
                                <div class="grid grid-cols-2 md:grid-cols-3 gap-4 text-center">
                                    <div class="prize-summary-stat">
                                        <div class="stat-value text-xl font-bold text-white">{{ prize_distribution|length }}</div>
                                        <div class="stat-label text-sm text-gray-400">Prize Positions</div>
                                    </div>
                                    <div class="prize-summary-stat">
                                        <div class="stat-value text-xl font-bold text-green-400">100%</div>
                                        <div class="stat-label text-sm text-gray-400">Pool Distributed</div>
                                    </div>
                                    <div class="prize-summary-stat md:col-span-1 col-span-2">
                                        <div class="stat-value text-xl font-bold text-primary">${{ tournament.prize_pool|div:tournament.max_participants|floatformat:0 }}</div>
                                        <div class="stat-label text-sm text-gray-400">Avg per Participant</div>
                                    </div>
                                </div>
                            </div>
                            {% endif %}
                            
                            <!-- Non-Monetary Prizes Section (Future Enhancement) -->
                            {% with non_monetary_prizes=tournament.get_non_monetary_prizes %}
                            {% if non_monetary_prizes %}
                            <div class="non-monetary-prizes mt-8 pt-6 border-t border-gray-700/50">
                                <h4 class="text-lg font-semibold text-white mb-4">Additional Prizes</h4>
                                <div class="additional-prizes-grid grid grid-cols-1 md:grid-cols-2 gap-4">
                                    {% for prize in non_monetary_prizes %}
                                    <div class="additional-prize-item p-4 bg-gray-800/30 rounded-lg border border-gray-700/50">
                                        <div class="flex items-center gap-3">
                                            <span class="material-symbols-outlined text-yellow-500">redeem</span>
                                            <div>
                                                <div class="font-medium text-white">{{ prize.name }}</div>
                                                <div class="text-sm text-gray-400">{{ prize.description }}</div>
                                            </div>
                                        </div>
                                    </div>
                                    {% endfor %}
                                </div>
                            </div>
                            {% endif %}
                            {% endwith %}
                            
                            <!-- Sponsor Acknowledgment Section -->
                            {% if tournament.sponsors.exists %}
                            <div class="sponsor-acknowledgment mt-8 pt-6 border-t border-gray-700/50">
                                <h4 class="text-lg font-semibold text-white mb-4">Sponsored By</h4>
                                <div class="sponsors-grid grid grid-cols-2 md:grid-cols-3 gap-4">
                                    {% for sponsor in tournament.sponsors.all %}
                                    <div class="sponsor-item text-center p-4 bg-gray-800/30 rounded-lg border border-gray-700/50">
                                        {% if sponsor.logo %}
                                            <img src="{{ sponsor.logo.url }}" 
                                                 alt="{{ sponsor.name }} logo" 
                                                 class="w-16 h-16 mx-auto mb-2 object-contain">
                                        {% endif %}
                                        <div class="sponsor-name text-sm font-medium text-white">{{ sponsor.name }}</div>
                                        {% if sponsor.contribution_amount %}
                                            <div class="sponsor-contribution text-xs text-gray-400">${{ sponsor.contribution_amount|floatformat:0 }} contribution</div>
                                        {% endif %}
                                    </div>
                                    {% endfor %}
                                </div>
                            </div>
                            {% else %}
                            <!-- Default sponsor acknowledgment for tournaments with additional prize money -->
                            {% if tournament.prize_pool > tournament.registration_fee|multiply:tournament.total_registered %}
                            <div class="sponsor-acknowledgment mt-8 pt-6 border-t border-gray-700/50">
                                <div class="text-center p-4 bg-gray-800/30 rounded-lg border border-gray-700/50">
                                    <span class="material-symbols-outlined text-primary text-2xl mb-2">volunteer_activism</span>
                                    <div class="text-sm text-gray-300">Additional prize pool funding provided by tournament organizers</div>
                                </div>
                            </div>
                            {% endif %}
                            {% endif %}
                            
                        </div>
                    </div>
                    {% endif %}
                </div>
            </div>

            <!-- Enhanced Sticky Registration Sidebar -->
            <div class="registration-sidebar">
                <!-- Enhanced Sticky Registration Card Component -->
                <div class="enhanced-registration-card" 
                     data-tournament-status="{{ tournament.status }}"
                     data-registration-status="{% if user.is_authenticated %}{% if is_registered %}registered{% else %}not_registered{% endif %}{% else %}not_authenticated{% endif %}"
                     data-spots-remaining="{{ tournament_stats.participants.spots_remaining|default:0 }}"
                     data-registration-fee="{{ tournament.registration_fee|default:0 }}"
                     aria-label="Tournament registration information">
                    
                    <!-- Registration Card Header -->
                    <div class="registration-card-header">
                        <h3 class="registration-card-title">
                            <span class="material-symbols-outlined text-primary" aria-hidden="true">how_to_reg</span>
                            Registration
                        </h3>
                        
                        <!-- Tournament Capacity Indicator -->
                        <div class="capacity-indicator" 
                             aria-label="Tournament capacity: {{ tournament_stats.participants.registered }} of {{ tournament.max_participants }} spots filled">
                            <div class="capacity-bar">
                                <div class="capacity-fill" 
                                     style="width: {{ tournament_stats.participants.percentage_full|default:0 }}%"
                                     aria-hidden="true"></div>
                            </div>
                            <div class="capacity-text">
                                <span class="registered-count">{{ tournament_stats.participants.registered }}</span>
                                <span class="capacity-separator">/</span>
                                <span class="max-participants">{{ tournament.max_participants }}</span>
                                <span class="capacity-label">participants</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Registration Card Content -->
                    <div class="registration-card-content">
                        {% if user.is_authenticated %}
                            {% if is_registered %}
                                <!-- Registered User State -->
                                <div class="registration-status registered" 
                                     role="status" 
                                     aria-live="polite">
                                    <div class="status-icon-container">
                                        <span class="material-symbols-outlined status-icon" aria-hidden="true">check_circle</span>
                                        <div class="status-pulse" aria-hidden="true"></div>
                                    </div>
                                    <div class="status-content">
                                        <div class="status-title">You're Registered!</div>
                                        <div class="status-subtitle">Ready to compete</div>
                                    </div>
                                </div>
                                
                                <!-- Registration Actions for Registered Users -->
                                {% if tournament.status == 'registration' %}
                                    <div class="registration-actions">
                                        <a href="{% url 'tournaments:unregister' tournament.slug %}" 
                                           class="btn btn-secondary w-full"
                                           aria-label="Withdraw from tournament">
                                            <span class="material-symbols-outlined text-sm" aria-hidden="true">person_remove</span>
                                            Withdraw
                                        </a>
                                    </div>
                                {% elif tournament.status == 'check_in' %}
                                    {% if user_participant %}
                                        {% if not user_participant.checked_in %}
                                            <div class="check-in-actions">
                                                <a href="{% url 'tournaments:check_in' tournament.slug %}" 
                                                   class="btn btn-primary w-full check-in-btn"
                                                   aria-label="Check in for tournament">
                                                    <span class="material-symbols-outlined text-sm" aria-hidden="true">check_circle</span>
                                                    Check In Now
                                                </a>
                                            </div>
                                        {% else %}
                                            <div class="checked-in-status">
                                                <div class="status-icon-container">
                                                    <span class="material-symbols-outlined status-icon text-green-500" aria-hidden="true">check_circle</span>
                                                </div>
                                                <div class="status-content">
                                                    <div class="status-title">Checked In!</div>
                                                    <div class="status-subtitle">Ready for tournament</div>
                                                    {% if user_participant.check_in_time %}
                                                        <div class="check-in-time">{{ user_participant.check_in_time|date:"M d, g:i A" }}</div>
                                                    {% endif %}
                                                </div>
                                            </div>
                                        {% endif %}
                                    {% else %}
                                        <div class="check-in-reminder">
                                            <div class="reminder-icon">
                                                <span class="material-symbols-outlined text-warning" aria-hidden="true">schedule</span>
                                            </div>
                                            <div class="reminder-content">
                                                <div class="reminder-title">Check-in Required</div>
                                                <div class="reminder-subtitle">You must be registered to check in</div>
                                            </div>
                                        </div>
                                    {% endif %}
                                {% endif %}
                                
                            {% else %}
                                <!-- Unregistered Authenticated User State -->
                                {% if tournament.status == 'registration' %}
                                    <!-- Entry Fee Information -->
                                    <div class="entry-fee-display">
                                        {% if tournament.registration_fee > 0 %}
                                            <div class="fee-amount-container">
                                                <span class="fee-currency">$</span>
                                                <span class="fee-amount">{{ tournament.registration_fee|floatformat:0 }}</span>
                                            </div>
                                            <div class="fee-label">Entry Fee</div>
                                            
                                            <!-- Payment Options Display -->
                                            <div class="payment-options">
                                                <div class="payment-methods">
                                                    <span class="material-symbols-outlined text-sm" aria-hidden="true">credit_card</span>
                                                    <span class="payment-text">Secure payment via Stripe</span>
                                                </div>
                                            </div>
                                        {% else %}
                                            <div class="fee-amount-container free">
                                                <span class="fee-amount">Free</span>
                                            </div>
                                            <div class="fee-label">Entry</div>
                                        {% endif %}
                                    </div>
                                    
                                    <!-- Urgency Indicators -->
                                    {% if tournament_stats.participants.spots_remaining <= 5 and tournament_stats.participants.spots_remaining > 0 %}
                                        <div class="urgency-indicator" 
                                             role="alert" 
                                             aria-live="assertive">
                                            <span class="material-symbols-outlined urgency-icon" aria-hidden="true">warning</span>
                                            <div class="urgency-content">
                                                <div class="urgency-title">Almost Full!</div>
                                                <div class="urgency-subtitle">
                                                    Only {{ tournament_stats.participants.spots_remaining }} spot{{ tournament_stats.participants.spots_remaining|pluralize }} remaining
                                                </div>
                                            </div>
                                        </div>
                                    {% elif tournament_stats.participants.spots_remaining == 0 %}
                                        <div class="tournament-full-indicator" 
                                             role="alert" 
                                             aria-live="assertive">
                                            <span class="material-symbols-outlined" aria-hidden="true">group_off</span>
                                            <div class="full-content">
                                                <div class="full-title">Tournament Full</div>
                                                <div class="full-subtitle">No spots available</div>
                                            </div>
                                        </div>
                                    {% endif %}
                                    
                                    <!-- Registration Deadline -->
                                    <div class="registration-deadline" 
                                         aria-label="Registration deadline: {{ tournament.registration_end|date:'M d, Y g:i A' }}">
                                        <span class="material-symbols-outlined deadline-icon" aria-hidden="true">schedule</span>
                                        <div class="deadline-content">
                                            <div class="deadline-label">Registration ends</div>
                                            <div class="deadline-date">{{ tournament.registration_end|date:"M d, g:i A" }}</div>
                                        </div>
                                    </div>
                                    
                                    <!-- Registration Button -->
                                    <div class="registration-actions">
                                        {% if tournament_stats.participants.spots_remaining > 0 %}
                                            <a href="{% url 'tournaments:register' tournament.slug %}" 
                                               class="registration-button btn-primary w-full"
                                               aria-label="Register for {{ tournament.name }}">
                                                <span class="material-symbols-outlined button-icon" aria-hidden="true">person_add</span>
                                                <span class="button-text">Register Now</span>
                                                {% if tournament_stats.participants.spots_remaining <= 5 %}
                                                    <span class="button-urgency" aria-hidden="true">!</span>
                                                {% endif %}
                                            </a>
                                        {% else %}
                                            <button class="registration-button btn-disabled w-full" 
                                                    disabled
                                                    aria-label="Tournament is full, registration unavailable">
                                                <span class="material-symbols-outlined button-icon" aria-hidden="true">block</span>
                                                <span class="button-text">Tournament Full</span>
                                            </button>
                                        {% endif %}
                                    </div>
                                    
                                {% elif tournament.status == 'draft' %}
                                    <!-- Draft Tournament State -->
                                    <div class="registration-closed draft">
                                        <div class="closed-icon">
                                            <span class="material-symbols-outlined" aria-hidden="true">schedule</span>
                                        </div>
                                        <div class="closed-content">
                                            <div class="closed-title">Coming Soon</div>
                                            <div class="closed-subtitle">Registration will open soon</div>
                                        </div>
                                    </div>
                                    
                                {% else %}
                                    <!-- Registration Closed State -->
                                    <div class="registration-closed">
                                        <div class="closed-icon">
                                            <span class="material-symbols-outlined" aria-hidden="true">lock</span>
                                        </div>
                                        <div class="closed-content">
                                            <div class="closed-title">Registration Closed</div>
                                            <div class="closed-subtitle">
                                                {% if tournament.status == 'check_in' %}
                                                    Check-in period active
                                                {% elif tournament.status == 'in_progress' %}
                                                    Tournament in progress
                                                {% elif tournament.status == 'completed' %}
                                                    Tournament completed
                                                {% endif %}
                                            </div>
                                        </div>
                                    </div>
                                {% endif %}
                            {% endif %}
                            
                        {% else %}
                            <!-- Unauthenticated User State -->
                            <div class="registration-login">
                                <div class="login-prompt">
                                    <div class="login-icon">
                                        <span class="material-symbols-outlined" aria-hidden="true">login</span>
                                    </div>
                                    <div class="login-content">
                                        <div class="login-title">Login Required</div>
                                        <div class="login-subtitle">Create an account or login to register</div>
                                    </div>
                                </div>
                                
                                <!-- Entry Fee Preview for Unauthenticated Users -->
                                {% if tournament.status == 'registration' %}
                                    <div class="fee-preview">
                                        {% if tournament.registration_fee > 0 %}
                                            <span class="preview-fee">${{ tournament.registration_fee|floatformat:0 }} entry fee</span>
                                        {% else %}
                                            <span class="preview-fee">Free to enter</span>
                                        {% endif %}
                                    </div>
                                {% endif %}
                                
                                <div class="login-actions">
                                    <a href="{% url 'account_login' %}?next={% url 'tournaments:detail' slug=tournament.slug %}" 
                                       class="btn btn-primary w-full"
                                       aria-label="Login to register for tournament">
                                        <span class="material-symbols-outlined text-sm" aria-hidden="true">login</span>
                                        Login to Register
                                    </a>
                                </div>
                            </div>
                        {% endif %}
                    </div>
                    
                    <!-- Registration Card Footer -->
                    <div class="registration-card-footer">
                        {% if tournament.status == 'registration' %}
                            <div class="footer-stats">
                                <div class="stat-item">
                                    <span class="material-symbols-outlined stat-icon" aria-hidden="true">group</span>
                                    <span class="stat-text">{{ tournament_stats.participants.registered }} registered</span>
                                </div>
                                {% if tournament_stats.participants.spots_remaining > 5 %}
                                    <div class="stat-item">
                                        <span class="material-symbols-outlined stat-icon" aria-hidden="true">event_available</span>
                                        <span class="stat-text">{{ tournament_stats.participants.spots_remaining }} spots left</span>
                                    </div>
                                {% endif %}
                            </div>
                        {% endif %}
                    </div>
                </div>

                <!-- Organizer Controls -->
                {% if user == tournament.organizer %}
                <div class="gaming-info-card organizer-controls">
                    <h4 class="gaming-info-card-title">
                        <span class="material-symbols-outlined text-primary mr-2">admin_panel_settings</span>
                        Tournament Management
                    </h4>
                    <div class="organizer-actions-grid">
                        
                        <!-- Status Management Section -->
                        {% if tournament.status == 'draft' %}
                            <!-- Open Registration Button -->
                            <form method="post" action="{% url 'tournaments:change_status' tournament.slug %}" class="inline">
                                {% csrf_token %}
                                <input type="hidden" name="new_status" value="registration">
                                <button type="submit" 
                                        class="organizer-action-btn success w-full"
                                        onclick="return confirm('Open registration for this tournament? Players will be able to sign up immediately.')">
                                    <span class="material-symbols-outlined">how_to_reg</span>
                                    <div class="action-content">
                                        <div class="action-title">Open Registration</div>
                                        <div class="action-subtitle">Allow players to sign up</div>
                                    </div>
                                </button>
                            </form>
                        {% endif %}

                        {% if tournament.status == 'registration' %}
                            <!-- Close Registration / Start Check-in Button -->
                            {% if tournament.total_registered >= tournament.min_participants %}
                                <form method="post" action="{% url 'tournaments:change_status' tournament.slug %}" class="inline">
                                    {% csrf_token %}
                                    <input type="hidden" name="new_status" value="check_in">
                                    <button type="submit" 
                                            class="organizer-action-btn primary w-full"
                                            onclick="return confirm('Close registration and start check-in period? No more players will be able to register.')">
                                        <span class="material-symbols-outlined">check_circle</span>
                                        <div class="action-content">
                                            <div class="action-title">Start Check-in</div>
                                            <div class="action-subtitle">Close registration ({{ tournament.total_registered }} registered)</div>
                                        </div>
                                    </button>
                                </form>
                            {% else %}
                                <div class="organizer-action-btn disabled w-full">
                                    <span class="material-symbols-outlined">check_circle</span>
                                    <div class="action-content">
                                        <div class="action-title">Start Check-in</div>
                                        <div class="action-subtitle">Need {{ tournament.min_participants }} participants ({{ tournament.total_registered }} registered)</div>
                                    </div>
                                </div>
                            {% endif %}
                        {% endif %}

                        <!-- Generate Bracket Button -->
                        {% if tournament.status == 'check_in' or tournament.status == 'in_progress' %}
                            {% if not tournament.brackets.exists %}
                                <a href="{% url 'tournaments:generate_bracket' tournament.slug %}" 
                                   class="organizer-action-btn primary"
                                   onclick="return confirm('Generate tournament bracket? This will create matches for all checked-in participants.')">
                                    <span class="material-symbols-outlined">account_tree</span>
                                    <div class="action-content">
                                        <div class="action-title">Generate Bracket</div>
                                        <div class="action-subtitle">Create tournament bracket</div>
                                    </div>
                                </a>
                            {% else %}
                                <a href="{% url 'tournaments:generate_bracket' tournament.slug %}" 
                                   class="organizer-action-btn secondary"
                                   onclick="return confirm('Regenerate tournament bracket? This will delete existing matches and create new ones.')">
                                    <span class="material-symbols-outlined">refresh</span>
                                    <div class="action-content">
                                        <div class="action-title">Regenerate Bracket</div>
                                        <div class="action-subtitle">Recreate tournament bracket</div>
                                    </div>
                                </a>
                            {% endif %}
                        {% endif %}

                        <!-- Start Tournament Button -->
                        {% if tournament.status == 'check_in' and tournament.total_checked_in >= tournament.min_participants %}
                            <form method="post" action="{% url 'tournaments:change_status' tournament.slug %}" class="inline">
                                {% csrf_token %}
                                <input type="hidden" name="new_status" value="in_progress">
                                <button type="submit" 
                                        class="organizer-action-btn success w-full"
                                        onclick="return confirm('Start the tournament? This will begin the competition phase.')">
                                    <span class="material-symbols-outlined">play_arrow</span>
                                    <div class="action-content">
                                        <div class="action-title">Start Tournament</div>
                                        <div class="action-subtitle">Begin competition ({{ tournament.total_checked_in }} checked in)</div>
                                    </div>
                                </button>
                            </form>
                        {% elif tournament.status == 'check_in' %}
                            <div class="organizer-action-btn disabled w-full">
                                <span class="material-symbols-outlined">play_arrow</span>
                                <div class="action-content">
                                    <div class="action-title">Start Tournament</div>
                                    <div class="action-subtitle">Need {{ tournament.min_participants }} check-ins ({{ tournament.total_checked_in }} checked in)</div>
                                </div>
                            </div>
                        {% endif %}

                        <!-- Complete Tournament Button -->
                        {% if tournament.status == 'in_progress' %}
                            <form method="post" action="{% url 'tournaments:change_status' tournament.slug %}" class="inline">
                                {% csrf_token %}
                                <input type="hidden" name="new_status" value="completed">
                                <button type="submit" 
                                        class="organizer-action-btn secondary w-full"
                                        onclick="return confirm('Mark tournament as completed? This will finalize all results and distribute prizes if applicable.')">
                                    <span class="material-symbols-outlined">emoji_events</span>
                                    <div class="action-content">
                                        <div class="action-title">Complete Tournament</div>
                                        <div class="action-subtitle">Finalize results</div>
                                    </div>
                                </button>
                            </form>
                        {% endif %}

                        <!-- Cancel Tournament Button -->
                        {% if tournament.status != 'completed' and tournament.status != 'cancelled' %}
                            <form method="post" action="{% url 'tournaments:change_status' tournament.slug %}" class="inline">
                                {% csrf_token %}
                                <input type="hidden" name="new_status" value="cancelled">
                                <button type="submit" 
                                        class="organizer-action-btn danger w-full"
                                        onclick="return confirm('Cancel this tournament? This action cannot be undone. All participants will be notified.')">
                                    <span class="material-symbols-outlined">cancel</span>
                                    <div class="action-content">
                                        <div class="action-title">Cancel Tournament</div>
                                        <div class="action-subtitle">Cancel and notify participants</div>
                                    </div>
                                </button>
                            </form>
                        {% endif %}

                        <!-- View Participants Button -->
                        <a href="{% url 'tournaments:participants' tournament.slug %}" 
                           class="organizer-action-btn secondary">
                            <span class="material-symbols-outlined">group</span>
                            <div class="action-content">
                                <div class="action-title">Manage Participants</div>
                                <div class="action-subtitle">{{ tournament.total_registered }} registered, {{ tournament.total_checked_in }} checked in</div>
                            </div>
                        </a>

                        <!-- Check-in Management Button (when check-in is open) -->
                        {% if tournament.status == 'check_in' %}
                            <a href="{% url 'tournaments:participants' tournament.slug %}?tab=checkin" 
                               class="organizer-action-btn primary">
                                <span class="material-symbols-outlined">how_to_reg</span>
                                <div class="action-content">
                                    <div class="action-title">Check-in Management</div>
                                    <div class="action-subtitle">{{ tournament.total_checked_in }}/{{ tournament.total_registered }} checked in</div>
                                </div>
                            </a>
                        {% endif %}

                        <!-- Edit Tournament Button -->
                        <a href="{% url 'tournaments:edit' tournament.slug %}" 
                           class="organizer-action-btn secondary">
                            <span class="material-symbols-outlined">edit</span>
                            <div class="action-content">
                                <div class="action-title">Edit Tournament</div>
                                <div class="action-subtitle">Modify tournament settings</div>
                            </div>
                        </a>

                        <!-- View Bracket Button -->
                        {% if tournament.brackets.exists %}
                            <a href="{% url 'tournaments:bracket' tournament.slug %}" 
                               class="organizer-action-btn primary">
                                <span class="material-symbols-outlined">account_tree</span>
                                <div class="action-content">
                                    <div class="action-title">View Bracket</div>
                                    <div class="action-subtitle">Tournament bracket & matches</div>
                                </div>
                            </a>
                        {% endif %}

                    </div>
                </div>
                {% endif %}

                <!-- Tournament Info -->
                <div class="gaming-info-card">
                    <h4 class="gaming-info-card-title">
                        {{ "info"|material_icon:"text-primary mr-2" }}
                        Tournament Information
                    </h4>
                    <div class="info-list">
                        <div class="info-item">
                            <span class="info-label">Format</span>
                            <span class="info-value">{{ tournament_display.format_display }}</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Type</span>
                            <span class="info-value">{{ tournament_display.tournament_type_display }}</span>
                        </div>
                        {% if tournament.best_of %}
                        <div class="info-item">
                            <span class="info-label">Best of</span>
                            <span class="info-value">{{ tournament.best_of|safe_default:"Standard" }}</span>
                        </div>
                        {% endif %}
                        <div class="info-item">
                            <span class="info-label">Seeding</span>
                            <span class="info-value">{{ tournament_display.seeding_method_display }}</span>
                        </div>
                        {% if tournament.is_team_based and tournament.team_size %}
                        <div class="info-item">
                            <span class="info-label">Team Size</span>
                            <span class="info-value">{{ tournament.team_size|safe_default:"TBD" }} players</span>
                        </div>
                        {% endif %}
                        {% if template_flags.has_registration_end %}
                        <div class="info-item">
                            <span class="info-label">Registration Ends</span>
                            <span class="info-value">{{ formatted_dates.registration_end_date }}</span>
                        </div>
                        {% endif %}
                        <div class="info-item">
                            <span class="info-label">Participants</span>
                            <span class="info-value">{{ participant_display.registered_count|participant_count_display:participant_display.max_participants }}</span>
                        </div>
                        {% if prize_display.has_prize %}
                        <div class="info-item">
                            <span class="info-label">Prize Pool</span>
                            <span class="info-value text-yellow-400">{{ prize_display.formatted_amount }}</span>
                        </div>
                        {% endif %}
                        {% if not prize_display.is_free %}
                        <div class="info-item">
                            <span class="info-label">Entry Fee</span>
                            <span class="info-value">{{ prize_display.registration_fee_formatted }}</span>
                        </div>
                        {% endif %}
                    </div>
                </div>

                <!-- Organizer Info -->
                <div class="gaming-info-card">
                    <h4 class="gaming-info-card-title">
                        {{ "person"|material_icon:"text-primary mr-2" }}
                        Organizer
                    </h4>
                    <div class="organizer-info">
                        <div class="flex items-center space-x-3">
                            {% if organizer_display.has_avatar %}
                                <img src="{{ organizer_display.avatar_url }}" 
                                     alt="{{ organizer_display.username }} avatar" 
                                     class="w-12 h-12 rounded-full"
                                     loading="lazy">
                            {% else %}
                                <div class="w-12 h-12 rounded-full bg-primary/20 flex items-center justify-center">
                                    {{ "person"|material_icon:"text-primary" }}
                                </div>
                            {% endif %}
                            <div>
                                <div class="font-medium text-white">{{ organizer_display.display_name }}</div>
                                <div class="text-sm text-gray-400">Tournament Organizer</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Enhanced Social Sharing -->
                <div class="gaming-info-card">
                    <h4 class="gaming-info-card-title">
                        <span class="material-symbols-outlined text-primary mr-2">share</span>
                        Share Tournament
                    </h4>
                    <div class="share-buttons">
                        <button class="share-btn" 
                                data-share="copy" 
                                aria-label="Copy tournament link to clipboard"
                                title="Copy Link">
                            <span class="material-symbols-outlined">link</span>
                            <span>Copy Link</span>
                        </button>
                        <button class="share-btn" 
                                data-share="twitter" 
                                aria-label="Share tournament on Twitter"
                                title="Share on Twitter">
                            <span class="material-symbols-outlined">share</span>
                            <span>Twitter</span>
                        </button>
                        <button class="share-btn" 
                                data-share="discord" 
                                aria-label="Copy tournament info formatted for Discord"
                                title="Share on Discord">
                            <span class="material-symbols-outlined">chat</span>
                            <span>Discord</span>
                        </button>
                        <button class="share-btn" 
                                data-share="facebook" 
                                aria-label="Share tournament on Facebook"
                                title="Share on Facebook">
                            <span class="material-symbols-outlined">thumb_up</span>
                            <span>Facebook</span>
                        </button>
                    </div>
                    
                    <!-- Share Statistics -->
                    <div class="share-stats mt-4 pt-4 border-t border-gray-700/50">
                        <div class="flex items-center justify-between text-sm text-gray-400">
                            <span>Tournament shared</span>
                            <span class="share-count font-medium text-white">0</span>
                            <span>times</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
</div>
{% endblock %}

{% block extra_js %}
<!-- Performance Optimization Scripts -->
<script src="{% static 'js/modules/performance-optimizer.js' %}" defer></script>

<!-- Existing Scripts -->
<script src="{% static 'js/modules/console-error-handler.js' %}" defer></script>
<script src="{% static 'js/tournament-detail.js' %}" defer></script>
<script src="{% static 'js/mobile-optimization.js' %}" defer></script>

<!-- Performance Configuration -->
<script>
// Performance configuration settings
window.performanceConfig = {
    criticalLoadTime: 3000,
    maxLoadTime: 5000,
    enableProgressiveLoading: true,
    enableImageOptimization: true,
    enableCaching: true
};
</script>

<!-- Performance Monitoring -->
<script>
// Initialize performance monitoring for tournament detail page
document.addEventListener('DOMContentLoaded', function() {
    // Initialize PerformanceOptimizer with configuration
    if (typeof PerformanceOptimizer !== 'undefined') {
        window.performanceOptimizer = new PerformanceOptimizer(window.performanceConfig);
        
        // Mark critical content as high priority
        const criticalElements = document.querySelectorAll('.tournament-title, .tournament-status, .registration-button');
        criticalElements.forEach(el => el.setAttribute('data-critical', 'true'));
        
        // Set up progressive loading for secondary content
        const secondaryContent = document.querySelectorAll('.tournament-stats, .participant-list, .match-history');
        secondaryContent.forEach(el => {
            el.setAttribute('data-progressive-load', 'content');
            el.classList.add('progressive-content');
        });
        
        // Optimize form submissions
        const forms = document.querySelectorAll('form');
        forms.forEach(form => {
            if (window.performanceOptimizer.optimizeFormSubmission) {
                window.performanceOptimizer.optimizeFormSubmission(form);
            }
        });
        
        // Measure page performance
        if (window.performanceOptimizer.measurePerformance) {
            window.performanceOptimizer.measurePerformance('tournament-detail-render', () => {
                // Page rendering complete
                document.body.classList.add('page-rendered');
            });
        }

        // Performance budget check (development only)
        {% if debug %}
        if (window.performanceOptimizer && window.performanceOptimizer.checkPerformanceBudget) {
            window.performanceOptimizer.checkPerformanceBudget('JavaScript', 150, 200);
            window.performanceOptimizer.checkPerformanceBudget('CSS', 100, 150);
        }
        {% endif %}
    }
});
</script>

<!-- Render time indicator -->
<!-- Debug: Page rendered at {{ now|date:"Y-m-d H:i:s" }} -->
{% endblock %}